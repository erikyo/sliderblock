(()=>{"use strict";var e,t={456:()=>{const e=window.wp.blocks,t=window.wp.hooks,n="start";class i{constructor(e,t){this.config=t,this.totalSlides=e,this.isTransitioning=!1,s(this,e,t)}next(e=1){if(this.isTransitioning||this.isStatic)return;const{stateIndex:t}=this;let n=0,i=t;for(let t=0;t<e;t++){const e=this.states[i];n+=e.next.moveSlides,i=e.next.stateIndex}return i!==t?(this.stateIndex=i,[t,n]):void 0}prev(e=1){if(this.isTransitioning||this.isStatic)return;const{stateIndex:t}=this;let n=0,i=t;for(let t=0;t<e;t++){const e=this.states[i];n+=e.prev.moveSlides,i=e.prev.stateIndex}return i!==t?(this.stateIndex=i,[t,n]):void 0}}function s(e,t,n){e.stateIndex=0,function(e){const{slidesToScroll:t,slidesToShow:n}=e.config,{totalSlides:i,config:s}=e;if(i<n&&(s.slidesToShow=i),!(i<=n)&&(t>n&&(s.slidesToScroll=n),i<t+n)){const e=i-n;s.slidesToScroll=e}}(e),e.isStatic=t<=n.slidesToShow,e.states=function(e){const{totalSlides:t}=e,{loop:n}=e.config,i=function(e){const{slidesToShow:t,slidesToScroll:n,loop:i}=e.config,{isStatic:s,totalSlides:o}=e,r=[],a=o-1;for(let e=0;e<o;e+=n){const n=e+t-1;if(n>a){if(!i){const e=a-t+1,n=r.length-1;(0===r.length||r.length>0&&r[n][0]!==e)&&r.push([e,a]);break}{const t=n-o;r.push([e,t])}}else r.push([e,n]);if(s)break}return r}(e),s=[],o=i.length-1;for(let e=0;e<i.length;e++){let r,a;n?(r=e===o?0:e+1,a=0===e?o:e-1):(r=e===o?o:e+1,a=0===e?0:e-1);const l=i[e][0],c=i[r][0],d=i[a][0];let u=c-l;c<l&&(u+=t);let p=l-d;d>l&&(p+=t),s.push({page:i[e],next:{stateIndex:r,moveSlides:u},prev:{stateIndex:a,moveSlides:p}})}return s}(e)}function o(e){if(e.onSlideCbs){const t=e.states[e.stateIndex],[n,i]=t.page;e.onSlideCbs.forEach((t=>t(e.stateIndex,n,i)))}}function r(e){e.offset=-1*e.states[e.stateIndex].page[0],a(e),o(e)}function a(e){const{track:t,offset:n,dragged:i}=e;t.style.transform=0===n?`translate3d(${i}px,0px,0px)`:`translate3d(  calc( ${i}px + ${n} * (var(--slide-width) + ${e.config.slideGap})),0px,0px)`}function l(e){e.track.style.transitionDuration=`${e.config.transitionDuration}ms`}function c(e){e.track.style.transitionDuration="0ms"}const d=()=>"ontouchstart"in window;function u(e){const t=this,n=t.slider;n.isTransitioning||(n.dragged=0,t.isScrolled=!1,t.startMouseClientX="touches"in e?e.touches[0].clientX:e.clientX,"touches"in e||(e.target||t).setPointerCapture(e.pointerId),c(n),h(t,"addEventListener"))}function p(e){const t=this,n="touches"in e?e.touches[0].clientX:e.clientX,i=t.slider.dragged=n-t.startMouseClientX,s=Math.abs(i);s>5&&(t.slider.isDragging=!0),s>15&&e.preventDefault(),t.slider.dragged=i,a(t.slider),!t.isScrolled&&t.slider.config.loop&&i>10&&(t.isScrolled=!0,t.slider.prev())}function f(){const e=this,t=e.slider.dragged;e.slider.isDragging=!1,h(e,"removeEventListener"),e.slider.dragged=0,a(e.slider),l(e.slider),e.isScrolled||(t<-10?e.slider.next():t>10&&e.slider.prev())}const g=e=>e.preventDefault();function h(e,t){e[t]("contextmenu",f),d()?(e[t]("touchend",f),e[t]("touchmove",p)):(e[t]("pointerup",f),e[t]("pointermove",p))}const v={slideGap:"20px",slidesToScroll:1,slidesToShow:1,loop:!0,enableAutoplay:!1,stopAutoplayOnInteraction:!0,autoplayInterval:3e3,autoplayDirection:"to left",enablePagination:!0,transitionDuration:300,transitionTimingFunction:"ease",draggable:!0};function m(e){const t={...v};for(const n in e)if(window.matchMedia(n).matches){const i=e[n];for(const e in i)t[e]=i[e]}return t}function b(){const e=this.index,t=this.slider,n=t.stateIndex,i=t.config.loop,s=Math.abs(e-n),o=t.states.length-s,r=s>t.states.length/2&&i;e>n?r?t.prev(o):t.next(s):r?t.next(o):t.prev(s)}function w(e,t=e.config.transitionDuration){e.isTransitioning=!0,setTimeout((()=>{e.isTransitioning=!1}),t)}class y extends i{constructor(e,t){const n=e.querySelector(".blaze-track"),i=n.children,s=t?m(t):{...v};super(i.length,s),this.config=s,this.el=e,this.track=n,this.slides=i,this.offset=0,this.dragged=0,this.isDragging=!1,this.el.blazeSlider=this,this.passedConfig=t;const o=this;n.slider=o,x(s,o);let r=!1,a=0;window.addEventListener("resize",(()=>{if(0===a)return void(a=window.innerWidth);const e=window.innerWidth;a!==e&&(a=e,r||(r=!0,setTimeout((()=>{o.refresh(),r=!1}),200)))}))}next(e){if(this.isTransitioning)return;const t=super.next(e);if(!t)return;const[n,i]=t;S(this,n),w(this),function(e,t){const n=requestAnimationFrame;e.config.loop?(e.offset=-1*t,a(e),setTimeout((()=>{!function(e,t){for(let n=0;n<t;n++)e.track.append(e.slides[0])}(e,t),c(e),e.offset=0,a(e),n((()=>{n((()=>{l(e),o(e)}))}))}),e.config.transitionDuration)):r(e)}(this,i)}prev(e){if(this.isTransitioning)return;const t=super.prev(e);if(!t)return;const[n,i]=t;S(this,n),w(this),function(e,t){const n=requestAnimationFrame;if(e.config.loop){c(e),e.offset=-1*t,a(e),function(e,t){const n=e.slides.length;for(let i=0;i<t;i++){const t=e.slides[n-1];e.track.prepend(t)}}(e,t);const i=()=>{n((()=>{l(e),n((()=>{e.offset=0,a(e),o(e)}))}))};e.isDragging?d()?e.track.addEventListener("touchend",i,{once:!0}):e.track.addEventListener("pointerup",i,{once:!0}):n(i)}else r(e)}(this,i)}stopAutoplay(){clearInterval(this.autoplayTimer)}destroy(){this.track.removeEventListener(d()?"touchstart":"pointerdown",u),this.stopAutoplay(),this.paginationButtons?.forEach((e=>e.remove())),this.el.classList.remove("static"),this.el.classList.remove(n)}refresh(){const e=this.passedConfig?m(this.passedConfig):{...v};this.destroy(),x(e,this)}onSlide(e){return this.onSlideCbs||(this.onSlideCbs=new Set),this.onSlideCbs.add(e),()=>this.onSlideCbs.delete(e)}}function S(e,t){const i=e.el.classList,s=e.stateIndex,o=e.paginationButtons;e.config.loop||(0===s?i.add(n):i.remove(n),s===e.states.length-1?i.add("end"):i.remove("end")),o&&e.config.enablePagination&&(o[t].classList.remove("active"),o[s].classList.add("active"))}function x(e,t){const i=t.track;t.slides=i.children,t.offset=0,t.config=e,s(t,t.totalSlides,e),e.loop||t.el.classList.add(n),e.enableAutoplay&&!e.loop&&(e.enableAutoplay=!1),i.style.transitionProperty="transform",i.style.transitionTimingFunction=t.config.transitionTimingFunction,i.style.transitionDuration=`${t.config.transitionDuration}ms`;const{slidesToShow:o,slideGap:r}=t.config;t.el.style.setProperty("--slides-to-show",o+""),t.el.style.setProperty("--slide-gap",r),t.isStatic?t.el.classList.add("static"):e.draggable&&function(e){const t=e.track;t.slider=e;const n=d()?"touchstart":"pointerdown";t.addEventListener(n,u),t.addEventListener("click",(t=>{(e.isTransitioning||e.isDragging)&&t.preventDefault()})),t.addEventListener("dragstart",g)}(t),function(e){if(!e.config.enablePagination||e.isStatic)return;const t=e.el.querySelector(".blaze-pagination");if(!t)return;e.paginationButtons=[];const n=e.states.length;for(let i=0;i<n;i++){const s=document.createElement("button");e.paginationButtons.push(s),s.textContent=1+i+"",s.ariaLabel=`${i+1} of ${n}`,t.append(s),s.slider=e,s.index=i,s.onclick=b}e.paginationButtons[0].classList.add("active")}(t),function(e){const t=e.config;if(!t.enableAutoplay)return;const n="to left"===t.autoplayDirection?"next":"prev";e.autoplayTimer=setInterval((()=>{e[n]()}),t.autoplayInterval),t.stopAutoplayOnInteraction&&e.el.addEventListener(d()?"touchstart":"mousedown",(()=>{clearInterval(e.autoplayTimer)}),{once:!0})}(t),function(e){const t=e.el.querySelector(".blaze-prev"),n=e.el.querySelector(".blaze-next");t&&(t.onclick=()=>{e.prev()}),n&&(n.onclick=()=>{e.next()})}(t),a(t)}const E=window.wp.element,k="core/gallery",T="core/slider",z="gallery-slider",C={all:{slidesToShow:1,slidesToScroll:1,slideGap:"20px",draggable:!0,loop:!0,enableAutoplay:!1,stopAutoplayOnInteraction:!0,autoplayInterval:3e3,autoplayDirection:"to left",enablePagination:!0,transitionDuration:500,transitionTimingFunction:"ease"}};function I(e){const t=(0,E.useRef)(),n=(0,E.useRef)(null);return(0,E.useEffect)((()=>{t.current||(t.current=new y(n.current,e))}),[]),n}const D=e=>{let{className:t}=e;return t===z};function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},O.apply(this,arguments)}window.React;const L=window.wp.i18n,A=window.wp.compose,N=window.wp.blockEditor,P=window.wp.components,B=()=>(0,E.createElement)("div",{className:"controls"},(0,E.createElement)("button",{className:"blaze-prev"},"prev"),(0,E.createElement)("div",{className:"blaze-pagination"}),(0,E.createElement)("button",{className:"blaze-next"},"next")),F=(0,A.createHigherOrderComponent)((e=>t=>{var n;const{attributes:i,isSelected:s,setAttributes:o}=t;if(!D(i))return(0,E.createElement)(e,t);console.log(t);const r=null!==(n=i?.blazeconfig)&&void 0!==n?n:{},a=(e=>({all:{...e},...C}))(r);return(0,E.createElement)(E.Fragment,null,(0,E.createElement)("div",{className:"blaze-slider",ref:I(a)},(0,E.createElement)("div",{className:"blaze-container"},(0,E.createElement)("div",{className:"blaze-track-container"},(0,E.createElement)(e,O({},t,{"data-blaze":JSON.stringify(a)})))),(0,E.createElement)(B,null)),(0,E.createElement)(N.InspectorControls,null,(0,E.createElement)(P.PanelBody,{title:"Slider",initialOpen:!0},(0,E.createElement)(P.ToggleControl,{label:(0,L.__)("Loop"),checked:r.loop,onChange:e=>{o({...i,blazeconfig:{...r,loop:e}})}}),(0,E.createElement)(P.ToggleControl,{label:(0,L.__)("Autoplay"),checked:r.enableAutoplay,onChange:e=>{o({...i,blazeconfig:{...r,enableAutoplay:e}})}}),(0,E.createElement)(P.RangeControl,{label:(0,L.__)("Slides Displayed"),value:r.slidesToShow,onChange:e=>{o({...i,blazeconfig:{...r,slidesToShow:e}})},min:1,max:10}))))}),"Controls"),$=(0,A.createHigherOrderComponent)((e=>t=>{if(!D(t.attributes))return(0,E.createElement)(e,t);const{attributes:n}=t,{blazeconfig:i}=n||C.all,s={...t,wrapperProps:{...t.wrapperProps,blazeconfig:{...i}}};return(0,E.createElement)(e,O({},s,{className:"blaze-track"}))}),"withEdit");(0,e.registerBlockVariation)(k,{name:T,title:"Slider block",description:"A slider using the core gallery",isDefault:!1,icon:"universal-access-alt",keywords:["slider"],attributes:{className:z},scope:["inserter"],isActive:D}),(0,t.addFilter)("editor.BlockEdit",k,F),(0,t.addFilter)("editor.BlockListBlock",T,$),(0,t.addFilter)("blocks.getSaveElement",T,((e,t,n)=>{if(!D(n))return e;const i=JSON.stringify({...n.blazeconfig})||null;return(0,E.createElement)("div",{className:"blaze-slider","data-blaze":i},(0,E.createElement)("div",{className:"blaze-container"},(0,E.createElement)("div",{className:"blaze-track-container"},e)),(0,E.createElement)(B,null))}))}},n={};function i(e){var s=n[e];if(void 0!==s)return s.exports;var o=n[e]={exports:{}};return t[e](o,o.exports,i),o.exports}i.m=t,e=[],i.O=(t,n,s,o)=>{if(!n){var r=1/0;for(d=0;d<e.length;d++){n=e[d][0],s=e[d][1],o=e[d][2];for(var a=!0,l=0;l<n.length;l++)(!1&o||r>=o)&&Object.keys(i.O).every((e=>i.O[e](n[l])))?n.splice(l--,1):(a=!1,o<r&&(r=o));if(a){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[n,s,o]},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={309:0,641:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var s,o,r=n[0],a=n[1],l=n[2],c=0;if(r.some((t=>0!==e[t]))){for(s in a)i.o(a,s)&&(i.m[s]=a[s]);if(l)var d=l(i)}for(t&&t(n);c<r.length;c++)o=r[c],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(d)},n=self.webpackChunkslider_block=self.webpackChunkslider_block||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var s=i.O(void 0,[641],(()=>i(456)));s=i.O(s)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixDQUFDQyxFQUE0QkMsS0FDdkQsSUFLSTNCLEVBQVV3QixFQUxWZixFQUFXa0IsRUFBSyxHQUNoQkMsRUFBY0QsRUFBSyxHQUNuQkUsRUFBVUYsRUFBSyxHQUdJdlAsRUFBSSxFQUMzQixHQUFHcU8sRUFBU3FCLE1BQU1DLEdBQWdDLElBQXhCUixFQUFnQlEsS0FBYSxDQUN0RCxJQUFJL0IsS0FBWTRCLEVBQ1o3QixFQUFvQnFCLEVBQUVRLEVBQWE1QixLQUNyQ0QsRUFBb0JPLEVBQUVOLEdBQVk0QixFQUFZNUIsSUFHaEQsR0FBRzZCLEVBQVMsSUFBSXJCLEVBQVNxQixFQUFROUIsRUFDbEMsQ0FFQSxJQURHMkIsR0FBNEJBLEVBQTJCQyxHQUNyRHZQLEVBQUlxTyxFQUFTck4sT0FBUWhCLElBQ3pCb1AsRUFBVWYsRUFBU3JPLEdBQ2hCMk4sRUFBb0JxQixFQUFFRyxFQUFpQkMsSUFBWUQsRUFBZ0JDLElBQ3JFRCxFQUFnQkMsR0FBUyxLQUUxQkQsRUFBZ0JDLEdBQVcsRUFFNUIsT0FBT3pCLEVBQW9CUSxFQUFFQyxFQUFPLEVBR2pDd0IsRUFBcUJDLEtBQStCLHlCQUFJQSxLQUErQiwwQkFBSyxHQUNoR0QsRUFBbUIxTixRQUFRbU4sRUFBcUI1RSxLQUFLLEtBQU0sSUFDM0RtRixFQUFtQjNPLEtBQU9vTyxFQUFxQjVFLEtBQUssS0FBTW1GLEVBQW1CM08sS0FBS3dKLEtBQUttRixHLEtDaER2RixJQUFJRSxFQUFzQm5DLEVBQW9CUSxPQUFFTCxFQUFXLENBQUMsTUFBTSxJQUFPSCxFQUFvQixPQUM3Rm1DLEVBQXNCbkMsRUFBb0JRLEVBQUUyQixFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2xpZGVyLWJsb2NrL3dlYnBhY2svcnVudGltZS9jaHVuayBsb2FkZWQiLCJ3ZWJwYWNrOi8vc2xpZGVyLWJsb2NrL2V4dGVybmFsIHdpbmRvdyBbXCJ3cFwiLFwiYmxvY2tzXCJdIiwid2VicGFjazovL3NsaWRlci1ibG9jay9leHRlcm5hbCB3aW5kb3cgW1wid3BcIixcImhvb2tzXCJdIiwid2VicGFjazovL3NsaWRlci1ibG9jay8uL25vZGVfbW9kdWxlcy9ibGF6ZS1zbGlkZXIvZGlzdC9ibGF6ZS1zbGlkZXIuZXNtLmpzIiwid2VicGFjazovL3NsaWRlci1ibG9jay9leHRlcm5hbCB3aW5kb3cgW1wid3BcIixcImVsZW1lbnRcIl0iLCJ3ZWJwYWNrOi8vc2xpZGVyLWJsb2NrLy4vc3JjL2NvbnN0YW50cy50cyIsIndlYnBhY2s6Ly9zbGlkZXItYmxvY2svLi9zcmMvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vc2xpZGVyLWJsb2NrLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHMuanMiLCJ3ZWJwYWNrOi8vc2xpZGVyLWJsb2NrL2V4dGVybmFsIHdpbmRvdyBcIlJlYWN0XCIiLCJ3ZWJwYWNrOi8vc2xpZGVyLWJsb2NrL2V4dGVybmFsIHdpbmRvdyBbXCJ3cFwiLFwiaTE4blwiXSIsIndlYnBhY2s6Ly9zbGlkZXItYmxvY2svZXh0ZXJuYWwgd2luZG93IFtcIndwXCIsXCJjb21wb3NlXCJdIiwid2VicGFjazovL3NsaWRlci1ibG9jay9leHRlcm5hbCB3aW5kb3cgW1wid3BcIixcImJsb2NrRWRpdG9yXCJdIiwid2VicGFjazovL3NsaWRlci1ibG9jay9leHRlcm5hbCB3aW5kb3cgW1wid3BcIixcImNvbXBvbmVudHNcIl0iLCJ3ZWJwYWNrOi8vc2xpZGVyLWJsb2NrLy4vc3JjL0NvbXBvbmVudHMvQ29udHJvbHMudHN4Iiwid2VicGFjazovL3NsaWRlci1ibG9jay8uL3NyYy93aXRoQ29udHJvbHMudHN4Iiwid2VicGFjazovL3NsaWRlci1ibG9jay8uL3NyYy93aXRoRWRpdC50c3giLCJ3ZWJwYWNrOi8vc2xpZGVyLWJsb2NrLy4vc3JjL2luZGV4LnRzeCIsIndlYnBhY2s6Ly9zbGlkZXItYmxvY2svLi9zcmMvc2F2ZS50c3giLCJ3ZWJwYWNrOi8vc2xpZGVyLWJsb2NrL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3NsaWRlci1ibG9jay93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3NsaWRlci1ibG9jay93ZWJwYWNrL3J1bnRpbWUvanNvbnAgY2h1bmsgbG9hZGluZyIsIndlYnBhY2s6Ly9zbGlkZXItYmxvY2svd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBkZWZlcnJlZCA9IFtdO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5PID0gKHJlc3VsdCwgY2h1bmtJZHMsIGZuLCBwcmlvcml0eSkgPT4ge1xuXHRpZihjaHVua0lkcykge1xuXHRcdHByaW9yaXR5ID0gcHJpb3JpdHkgfHwgMDtcblx0XHRmb3IodmFyIGkgPSBkZWZlcnJlZC5sZW5ndGg7IGkgPiAwICYmIGRlZmVycmVkW2kgLSAxXVsyXSA+IHByaW9yaXR5OyBpLS0pIGRlZmVycmVkW2ldID0gZGVmZXJyZWRbaSAtIDFdO1xuXHRcdGRlZmVycmVkW2ldID0gW2NodW5rSWRzLCBmbiwgcHJpb3JpdHldO1xuXHRcdHJldHVybjtcblx0fVxuXHR2YXIgbm90RnVsZmlsbGVkID0gSW5maW5pdHk7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgZGVmZXJyZWQubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgY2h1bmtJZHMgPSBkZWZlcnJlZFtpXVswXTtcblx0XHR2YXIgZm4gPSBkZWZlcnJlZFtpXVsxXTtcblx0XHR2YXIgcHJpb3JpdHkgPSBkZWZlcnJlZFtpXVsyXTtcblx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGNodW5rSWRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRpZiAoKHByaW9yaXR5ICYgMSA9PT0gMCB8fCBub3RGdWxmaWxsZWQgPj0gcHJpb3JpdHkpICYmIE9iamVjdC5rZXlzKF9fd2VicGFja19yZXF1aXJlX18uTykuZXZlcnkoKGtleSkgPT4gKF9fd2VicGFja19yZXF1aXJlX18uT1trZXldKGNodW5rSWRzW2pdKSkpKSB7XG5cdFx0XHRcdGNodW5rSWRzLnNwbGljZShqLS0sIDEpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZnVsZmlsbGVkID0gZmFsc2U7XG5cdFx0XHRcdGlmKHByaW9yaXR5IDwgbm90RnVsZmlsbGVkKSBub3RGdWxmaWxsZWQgPSBwcmlvcml0eTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYoZnVsZmlsbGVkKSB7XG5cdFx0XHRkZWZlcnJlZC5zcGxpY2UoaS0tLCAxKVxuXHRcdFx0dmFyIHIgPSBmbigpO1xuXHRcdFx0aWYgKHIgIT09IHVuZGVmaW5lZCkgcmVzdWx0ID0gcjtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn07IiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IHdpbmRvd1tcIndwXCJdW1wiYmxvY2tzXCJdOyIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSB3aW5kb3dbXCJ3cFwiXVtcImhvb2tzXCJdOyIsIi8qIGJsYXplLXNsaWRlciB2MS45LjEgYnkgTWFuYW4gVGFuayAqL1xuLyoqXG4gKiBjYWxjdWxhdGUgcGFnZXMgYW5kIHJldHVyblxuICovXG5mdW5jdGlvbiBjYWxjdWxhdGVQYWdlcyhzbGlkZXIpIHtcbiAgICBjb25zdCB7IHNsaWRlc1RvU2hvdywgc2xpZGVzVG9TY3JvbGwsIGxvb3AgfSA9IHNsaWRlci5jb25maWc7XG4gICAgY29uc3QgeyBpc1N0YXRpYywgdG90YWxTbGlkZXMgfSA9IHNsaWRlcjtcbiAgICBjb25zdCBwYWdlcyA9IFtdO1xuICAgIGNvbnN0IGxhc3RJbmRleCA9IHRvdGFsU2xpZGVzIC0gMTtcbiAgICAvLyBzdGFydCB3aXRoIGluZGV4IDAsIGtlZXAgYWRkaW5nIHNsaWRlc1RvU2Nyb2xsIHRvIGdldCB0aGUgbmV3IHBhZ2VcbiAgICBmb3IgKGxldCBzdGFydEluZGV4ID0gMDsgc3RhcnRJbmRleCA8IHRvdGFsU2xpZGVzOyBzdGFydEluZGV4ICs9IHNsaWRlc1RvU2Nyb2xsKSB7XG4gICAgICAgIGNvbnN0IF9lbmRJbmRleCA9IHN0YXJ0SW5kZXggKyBzbGlkZXNUb1Nob3cgLSAxO1xuICAgICAgICBjb25zdCBvdmVyZmxvdyA9IF9lbmRJbmRleCA+IGxhc3RJbmRleDtcbiAgICAgICAgaWYgKG92ZXJmbG93KSB7XG4gICAgICAgICAgICAvLyBpZiBub3QgbG9vcGVkXG4gICAgICAgICAgICBpZiAoIWxvb3ApIHtcbiAgICAgICAgICAgICAgICAvLyBhZGp1c3QgdGhlIHN0YXJ0SW5kZXhcbiAgICAgICAgICAgICAgICBjb25zdCBzdGFydEluZGV4ID0gbGFzdEluZGV4IC0gc2xpZGVzVG9TaG93ICsgMTtcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0UGFnZUluZGV4ID0gcGFnZXMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICAvLyBjcmVhdGUgcGFnZSBvbmx5IGlmIGFkanVzdGluZyB0aGUgc3RhcnRJbmRleCBkb2VzIG5vdCBtYWtlIGl0IHRoZSBzYW1lIGFzIHByZXZpb3VzbHkgc2F2ZWQgcGFnZVxuICAgICAgICAgICAgICAgIGlmIChwYWdlcy5sZW5ndGggPT09IDAgfHxcbiAgICAgICAgICAgICAgICAgICAgKHBhZ2VzLmxlbmd0aCA+IDAgJiYgcGFnZXNbbGFzdFBhZ2VJbmRleF1bMF0gIT09IHN0YXJ0SW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2VzLnB1c2goW3N0YXJ0SW5kZXgsIGxhc3RJbmRleF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGlmIGxvb3BlZFxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gYWRqdXN0IHRoZSBlbmRJbmRleFxuICAgICAgICAgICAgICAgIGNvbnN0IGVuZEluZGV4ID0gX2VuZEluZGV4IC0gdG90YWxTbGlkZXM7XG4gICAgICAgICAgICAgICAgcGFnZXMucHVzaChbc3RhcnRJbmRleCwgZW5kSW5kZXhdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBhZ2VzLnB1c2goW3N0YXJ0SW5kZXgsIF9lbmRJbmRleF0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIGlmIHN0YXRpYywgb25seSBhbGxvdyAxIGl0ZXJhdGlvblxuICAgICAgICBpZiAoaXNTdGF0aWMpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwYWdlcztcbn1cblxuLyoqXG4gKiBjYWxjdWxhdGUgYWxsIHBvc3NpYmxlIHN0YXRlcyBvZiBnaXZlbiBzbGlkZXJcbiAqL1xuZnVuY3Rpb24gY2FsY3VsYXRlU3RhdGVzKHNsaWRlcikge1xuICAgIGNvbnN0IHsgdG90YWxTbGlkZXMgfSA9IHNsaWRlcjtcbiAgICBjb25zdCB7IGxvb3AgfSA9IHNsaWRlci5jb25maWc7XG4gICAgLy8gZ2V0IGFsbCBwb3NzaWJsZSBwYWdlc1xuICAgIGNvbnN0IHBhZ2VzID0gY2FsY3VsYXRlUGFnZXMoc2xpZGVyKTtcbiAgICBjb25zdCBzdGF0ZXMgPSBbXTtcbiAgICBjb25zdCBsYXN0UGFnZUluZGV4ID0gcGFnZXMubGVuZ3RoIC0gMTtcbiAgICBmb3IgKGxldCBwYWdlSW5kZXggPSAwOyBwYWdlSW5kZXggPCBwYWdlcy5sZW5ndGg7IHBhZ2VJbmRleCsrKSB7XG4gICAgICAgIC8vIGNhbGN1bGF0ZSBwcmV2IGFuZCBuZXh0IHBhZ2UgaW5kZXggYmFzZWQgb24gY29uZmlnXG4gICAgICAgIGxldCBuZXh0UGFnZUluZGV4LCBwcmV2UGFnZUluZGV4O1xuICAgICAgICBpZiAobG9vcCkge1xuICAgICAgICAgICAgbmV4dFBhZ2VJbmRleCA9IHBhZ2VJbmRleCA9PT0gbGFzdFBhZ2VJbmRleCA/IDAgOiBwYWdlSW5kZXggKyAxO1xuICAgICAgICAgICAgcHJldlBhZ2VJbmRleCA9IHBhZ2VJbmRleCA9PT0gMCA/IGxhc3RQYWdlSW5kZXggOiBwYWdlSW5kZXggLSAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbmV4dFBhZ2VJbmRleCA9XG4gICAgICAgICAgICAgICAgcGFnZUluZGV4ID09PSBsYXN0UGFnZUluZGV4ID8gbGFzdFBhZ2VJbmRleCA6IHBhZ2VJbmRleCArIDE7XG4gICAgICAgICAgICBwcmV2UGFnZUluZGV4ID0gcGFnZUluZGV4ID09PSAwID8gMCA6IHBhZ2VJbmRleCAtIDE7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY3VycmVudFBhZ2VTdGFydEluZGV4ID0gcGFnZXNbcGFnZUluZGV4XVswXTtcbiAgICAgICAgY29uc3QgbmV4dFBhZ2VTdGFydEluZGV4ID0gcGFnZXNbbmV4dFBhZ2VJbmRleF1bMF07XG4gICAgICAgIGNvbnN0IHByZXZQYWdlU3RhcnRJbmRleCA9IHBhZ2VzW3ByZXZQYWdlSW5kZXhdWzBdO1xuICAgICAgICAvLyBjYWxjdWxhdGUgc2xpZGVzIHRoYXQgbmVlZCB0byBiZSBtb3ZlZCBmb3IgdHJhbnNpdGlvbmluZyB0byBuZXh0IGFuZCBwcmV2IHN0YXRlIGZyb20gY3VycmVudCBzdGF0ZVxuICAgICAgICBsZXQgbmV4dERpZmYgPSBuZXh0UGFnZVN0YXJ0SW5kZXggLSBjdXJyZW50UGFnZVN0YXJ0SW5kZXg7XG4gICAgICAgIGlmIChuZXh0UGFnZVN0YXJ0SW5kZXggPCBjdXJyZW50UGFnZVN0YXJ0SW5kZXgpIHtcbiAgICAgICAgICAgIG5leHREaWZmICs9IHRvdGFsU2xpZGVzO1xuICAgICAgICB9XG4gICAgICAgIGxldCBwcmV2RGlmZiA9IGN1cnJlbnRQYWdlU3RhcnRJbmRleCAtIHByZXZQYWdlU3RhcnRJbmRleDtcbiAgICAgICAgaWYgKHByZXZQYWdlU3RhcnRJbmRleCA+IGN1cnJlbnRQYWdlU3RhcnRJbmRleCkge1xuICAgICAgICAgICAgcHJldkRpZmYgKz0gdG90YWxTbGlkZXM7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGVzLnB1c2goe1xuICAgICAgICAgICAgcGFnZTogcGFnZXNbcGFnZUluZGV4XSxcbiAgICAgICAgICAgIG5leHQ6IHtcbiAgICAgICAgICAgICAgICBzdGF0ZUluZGV4OiBuZXh0UGFnZUluZGV4LFxuICAgICAgICAgICAgICAgIG1vdmVTbGlkZXM6IG5leHREaWZmLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByZXY6IHtcbiAgICAgICAgICAgICAgICBzdGF0ZUluZGV4OiBwcmV2UGFnZUluZGV4LFxuICAgICAgICAgICAgICAgIG1vdmVTbGlkZXM6IHByZXZEaWZmLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBzdGF0ZXM7XG59XG5cbmNvbnN0IFNUQVJUID0gJ3N0YXJ0JztcbmNvbnN0IEVORCA9ICdlbmQnO1xuY29uc3QgREVWID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJztcblxuLyoqXG4gKiBpdCBmaXhlcyBiZWxvdyBzY2VuYXJpb3Mgd2hpY2ggYXJlIHdyb25nIChhbmQgYWRkcyBhIHdhcm5pbmcgaW4gY29uc29sZSBpbiBkZXZlbG9wbWVudClcbiAqIC0gY29uZmlnLnNsaWRlc1RvU2hvdyBncmVhdGVyIHRoYW4gdG90YWxTbGlkZXNcbiAqIC0gY29uZmlnLnNsaWRlc1RvU2Nyb2xsIGdyZWF0ZXIgdGhhbiBjb25maWcuc2xpZGVzVG9TaG93IHdoaWNoIHNraXBzIHNob3dpbmcgY2VydGFpbiBzbGlkZXNcbiAqIC0gY29uZmlnLnNsaWRlc1RvU2Nyb2xsIHRvbyBoaWdoIHN1Y2ggdGhhdCBpdCBjYXVzZXMgZ2xpdGNoZXNcbiAqL1xuZnVuY3Rpb24gZml4U2xpZGVyQ29uZmlnKHNsaWRlcikge1xuICAgIGNvbnN0IHsgc2xpZGVzVG9TY3JvbGwsIHNsaWRlc1RvU2hvdyB9ID0gc2xpZGVyLmNvbmZpZztcbiAgICBjb25zdCB7IHRvdGFsU2xpZGVzLCBjb25maWcgfSA9IHNsaWRlcjtcbiAgICBpZiAodG90YWxTbGlkZXMgPCBzbGlkZXNUb1Nob3cpIHtcbiAgICAgICAgaWYgKERFVikge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdzbGlkZXNUb1Nob3cgY2FuIG5vdCBiZSBsYXJnZXIgdGhhbiBudW1iZXIgb2Ygc2xpZGVzLiBTZXR0aW5nIHNsaWRlc1RvU2hvdyA9IHRvdGFsU2xpZGVzIGluc3RlYWQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uZmlnLnNsaWRlc1RvU2hvdyA9IHRvdGFsU2xpZGVzO1xuICAgIH1cbiAgICBpZiAodG90YWxTbGlkZXMgPD0gc2xpZGVzVG9TaG93KSB7XG4gICAgICAgIC8vIHJldHVybiBiZWNhdXNlIHNsaWRlc1RvU2Nyb2xsIGRvZXMgbm90IG5lZWQgdG8gYmUgY2hlY2tlZFxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGRldGVjdCBzbGlkZXIgc2tpcHBpbmdcbiAgICBpZiAoc2xpZGVzVG9TY3JvbGwgPiBzbGlkZXNUb1Nob3cpIHtcbiAgICAgICAgaWYgKERFVikge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdzbGlkZXNUb1Njcm9sbCBjYW4gbm90IGJlIGdyZWF0ZXIgdGhhbiBzbGlkZXNUb1Nob3cuIFNldHRpbmcgc2xpZGVzVG9TY3JvbGwgPSBzbGlkZXNUb1Nob3cgaW5zdGVhZCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbmZpZy5zbGlkZXNUb1Njcm9sbCA9IHNsaWRlc1RvU2hvdztcbiAgICB9XG4gICAgLy8gZGV0ZWN0IHNsaWRlciBqdW1waW5nIGdsaXRjaFxuICAgIGlmICh0b3RhbFNsaWRlcyA8IHNsaWRlc1RvU2Nyb2xsICsgc2xpZGVzVG9TaG93KSB7XG4gICAgICAgIGNvbnN0IHByb3BlclNsaWRlc1RvU2Nyb2xsID0gdG90YWxTbGlkZXMgLSBzbGlkZXNUb1Nob3c7XG4gICAgICAgIGlmIChERVYpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2Fybihgc2xpZGVzVG9TY3JvbGwgPSAke3NsaWRlc1RvU2Nyb2xsfSBpcyB0b28gbGFyZ2UgZm9yIGEgc2xpZGVyIHdpdGggJHt0b3RhbFNsaWRlc30gc2xpZGVzIHdpdGggc2xpZGVzVG9TaG93PSR7c2xpZGVzVG9TaG93fSwgc2V0dGluZyBtYXggcG9zc2libGUgc2xpZGVzVG9TY3JvbGwgPSAke3Byb3BlclNsaWRlc1RvU2Nyb2xsfSBpbnN0ZWFkLmApO1xuICAgICAgICB9XG4gICAgICAgIGNvbmZpZy5zbGlkZXNUb1Njcm9sbCA9IHByb3BlclNsaWRlc1RvU2Nyb2xsO1xuICAgIH1cbn1cblxuY2xhc3MgQXV0b21hdGEge1xuICAgIGNvbnN0cnVjdG9yKHRvdGFsU2xpZGVzLCBjb25maWcpIHtcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgICAgIHRoaXMudG90YWxTbGlkZXMgPSB0b3RhbFNsaWRlcztcbiAgICAgICAgdGhpcy5pc1RyYW5zaXRpb25pbmcgPSBmYWxzZTtcbiAgICAgICAgY29uc3RydWN0QXV0b21hdGEodGhpcywgdG90YWxTbGlkZXMsIGNvbmZpZyk7XG4gICAgfVxuICAgIG5leHQocGFnZXMgPSAxKSB7XG4gICAgICAgIGlmICh0aGlzLmlzVHJhbnNpdGlvbmluZyB8fCB0aGlzLmlzU3RhdGljKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCB7IHN0YXRlSW5kZXggfSA9IHRoaXM7XG4gICAgICAgIGxldCBzbGlkZXNNb3ZlZCA9IDA7XG4gICAgICAgIGxldCBuZXdTdGF0ZUluZGV4ID0gc3RhdGVJbmRleDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYWdlczsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMuc3RhdGVzW25ld1N0YXRlSW5kZXhdO1xuICAgICAgICAgICAgc2xpZGVzTW92ZWQgKz0gc3RhdGUubmV4dC5tb3ZlU2xpZGVzO1xuICAgICAgICAgICAgbmV3U3RhdGVJbmRleCA9IHN0YXRlLm5leHQuc3RhdGVJbmRleDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3U3RhdGVJbmRleCA9PT0gc3RhdGVJbmRleClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5zdGF0ZUluZGV4ID0gbmV3U3RhdGVJbmRleDtcbiAgICAgICAgcmV0dXJuIFtzdGF0ZUluZGV4LCBzbGlkZXNNb3ZlZF07XG4gICAgfVxuICAgIHByZXYocGFnZXMgPSAxKSB7XG4gICAgICAgIGlmICh0aGlzLmlzVHJhbnNpdGlvbmluZyB8fCB0aGlzLmlzU3RhdGljKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCB7IHN0YXRlSW5kZXggfSA9IHRoaXM7XG4gICAgICAgIGxldCBzbGlkZXNNb3ZlZCA9IDA7XG4gICAgICAgIGxldCBuZXdTdGF0ZUluZGV4ID0gc3RhdGVJbmRleDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYWdlczsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMuc3RhdGVzW25ld1N0YXRlSW5kZXhdO1xuICAgICAgICAgICAgc2xpZGVzTW92ZWQgKz0gc3RhdGUucHJldi5tb3ZlU2xpZGVzO1xuICAgICAgICAgICAgbmV3U3RhdGVJbmRleCA9IHN0YXRlLnByZXYuc3RhdGVJbmRleDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3U3RhdGVJbmRleCA9PT0gc3RhdGVJbmRleClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5zdGF0ZUluZGV4ID0gbmV3U3RhdGVJbmRleDtcbiAgICAgICAgcmV0dXJuIFtzdGF0ZUluZGV4LCBzbGlkZXNNb3ZlZF07XG4gICAgfVxufVxuLy8gdGhpcyB3aWxsIGJlIGNhbGxlZCB3aGVuIHNsaWRlciBpcyByZWZyZXNoZWRcbmZ1bmN0aW9uIGNvbnN0cnVjdEF1dG9tYXRhKGF1dG9tYXRhLCB0b3RhbFNsaWRlcywgY29uZmlnKSB7XG4gICAgYXV0b21hdGEuc3RhdGVJbmRleCA9IDA7XG4gICAgZml4U2xpZGVyQ29uZmlnKGF1dG9tYXRhKTtcbiAgICBhdXRvbWF0YS5pc1N0YXRpYyA9IHRvdGFsU2xpZGVzIDw9IGNvbmZpZy5zbGlkZXNUb1Nob3c7XG4gICAgYXV0b21hdGEuc3RhdGVzID0gY2FsY3VsYXRlU3RhdGVzKGF1dG9tYXRhKTtcbn1cblxuZnVuY3Rpb24gc2Nyb2xsUHJldihzbGlkZXIsIHNsaWRlQ291bnQpIHtcbiAgICBjb25zdCByQWYgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XG4gICAgaWYgKCFzbGlkZXIuY29uZmlnLmxvb3ApIHtcbiAgICAgICAgbm9Mb29wU2Nyb2xsKHNsaWRlcik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBzaGlmdCBlbGVtZW50cyBhbmQgYXBwbHkgbmVnYXRpdmUgdHJhbnNmb3JtIHRvIG1ha2UgaXQgbG9vayBsaWtlIG5vdGhpbmcgY2hhbmdlZFxuICAgICAgICAvLyBkaXNhYmxlIHRyYW5zaXRpb25cbiAgICAgICAgZGlzYWJsZVRyYW5zaXRpb24oc2xpZGVyKTtcbiAgICAgICAgLy8gYXBwbHkgbmVnYXRpdmUgdHJhbnNmb3JtXG4gICAgICAgIHNsaWRlci5vZmZzZXQgPSAtMSAqIHNsaWRlQ291bnQ7XG4gICAgICAgIHVwZGF0ZVRyYW5zZm9ybShzbGlkZXIpO1xuICAgICAgICAvLyBhbmQgbW92ZSB0aGUgZWxlbWVudHNcbiAgICAgICAgd3JhcFByZXYoc2xpZGVyLCBzbGlkZUNvdW50KTtcbiAgICAgICAgY29uc3QgcmVzZXQgPSAoKSA9PiB7XG4gICAgICAgICAgICByQWYoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGVuYWJsZVRyYW5zaXRpb24oc2xpZGVyKTtcbiAgICAgICAgICAgICAgICByQWYoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzbGlkZXIub2Zmc2V0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlVHJhbnNmb3JtKHNsaWRlcik7XG4gICAgICAgICAgICAgICAgICAgIG9uU2xpZGVFbmQoc2xpZGVyKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICAvLyBpZiB0aGUgc2Nyb2xsIHdhcyBkb25lIGFzIHBhcnQgb2YgZHJhZ2dpbmdcbiAgICAgICAgLy8gcmVzZXQgc2hvdWxkIGJlIGRvbmUgYWZ0ZXIgdGhlIGRyYWdnaW5nIGlzIGNvbXBsZXRlZFxuICAgICAgICBpZiAoc2xpZGVyLmlzRHJhZ2dpbmcpIHtcbiAgICAgICAgICAgIGlmIChpc1RvdWNoKCkpIHtcbiAgICAgICAgICAgICAgICBzbGlkZXIudHJhY2suYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCByZXNldCwgeyBvbmNlOiB0cnVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc2xpZGVyLnRyYWNrLmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJ1cCcsIHJlc2V0LCB7IG9uY2U6IHRydWUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByQWYocmVzZXQpO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8gPC0tLSBtb3ZlIHNsaWRlciB0byBsZWZ0IGZvciBzaG93aW5nIGNvbnRlbnQgb24gcmlnaHRcbmZ1bmN0aW9uIHNjcm9sbE5leHQoc2xpZGVyLCBzbGlkZUNvdW50KSB7XG4gICAgY29uc3QgckFmID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xuICAgIGlmICghc2xpZGVyLmNvbmZpZy5sb29wKSB7XG4gICAgICAgIG5vTG9vcFNjcm9sbChzbGlkZXIpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gYXBwbHkgb2Zmc2V0IGFuZCBsZXQgdGhlIHNsaWRlciBzY3JvbGwgZnJvbSAgPC0gKHJpZ2h0IHRvIGxlZnQpXG4gICAgICAgIHNsaWRlci5vZmZzZXQgPSAtMSAqIHNsaWRlQ291bnQ7XG4gICAgICAgIHVwZGF0ZVRyYW5zZm9ybShzbGlkZXIpO1xuICAgICAgICAvLyBvbmNlIHRoZSB0cmFuc2l0aW9uIGlzIGRvbmVcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAvLyByZW1vdmUgdGhlIGVsZW1lbnRzIGZyb20gc3RhcnQgdGhhdCBhcmUgbm8gbG9uZ2VyIHZpc2libGUgYW5kIHB1dCB0aGVtIGF0IHRoZSBlbmRcbiAgICAgICAgICAgIHdyYXBOZXh0KHNsaWRlciwgc2xpZGVDb3VudCk7XG4gICAgICAgICAgICBkaXNhYmxlVHJhbnNpdGlvbihzbGlkZXIpO1xuICAgICAgICAgICAgLy8gYXBwbHkgdHJhbnNmb3JtIHdoZXJlIHRoZSBzbGlkZXIgc2hvdWxkIGdvXG4gICAgICAgICAgICBzbGlkZXIub2Zmc2V0ID0gMDtcbiAgICAgICAgICAgIHVwZGF0ZVRyYW5zZm9ybShzbGlkZXIpO1xuICAgICAgICAgICAgckFmKCgpID0+IHtcbiAgICAgICAgICAgICAgICByQWYoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlbmFibGVUcmFuc2l0aW9uKHNsaWRlcik7XG4gICAgICAgICAgICAgICAgICAgIG9uU2xpZGVFbmQoc2xpZGVyKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCBzbGlkZXIuY29uZmlnLnRyYW5zaXRpb25EdXJhdGlvbik7XG4gICAgfVxufVxuZnVuY3Rpb24gb25TbGlkZUVuZChzbGlkZXIpIHtcbiAgICBpZiAoc2xpZGVyLm9uU2xpZGVDYnMpIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSBzbGlkZXIuc3RhdGVzW3NsaWRlci5zdGF0ZUluZGV4XTtcbiAgICAgICAgY29uc3QgW2ZpcnN0U2xpZGVJbmRleCwgbGFzdFNsaWRlSW5kZXhdID0gc3RhdGUucGFnZTtcbiAgICAgICAgc2xpZGVyLm9uU2xpZGVDYnMuZm9yRWFjaCgoY2IpID0+IGNiKHNsaWRlci5zdGF0ZUluZGV4LCBmaXJzdFNsaWRlSW5kZXgsIGxhc3RTbGlkZUluZGV4KSk7XG4gICAgfVxufVxuXG4vLyB3aGVuIGxvb3AgaXMgZGlzYWJsZWQsIHdlIG11c3QgdXBkYXRlIHRoZSBvZmZzZXRcbmZ1bmN0aW9uIG5vTG9vcFNjcm9sbChzbGlkZXIpIHtcbiAgICBzbGlkZXIub2Zmc2V0ID0gLTEgKiBzbGlkZXIuc3RhdGVzW3NsaWRlci5zdGF0ZUluZGV4XS5wYWdlWzBdO1xuICAgIHVwZGF0ZVRyYW5zZm9ybShzbGlkZXIpO1xuICAgIG9uU2xpZGVFbmQoc2xpZGVyKTtcbn1cbmZ1bmN0aW9uIHdyYXBQcmV2KHNsaWRlciwgY291bnQpIHtcbiAgICBjb25zdCBsZW4gPSBzbGlkZXIuc2xpZGVzLmxlbmd0aDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICAgICAgLy8gcGljayB0aGUgbGFzdCBhbmQgbW92ZSB0byBmaXJzdFxuICAgICAgICBjb25zdCBzbGlkZSA9IHNsaWRlci5zbGlkZXNbbGVuIC0gMV07XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgc2xpZGVyLnRyYWNrLnByZXBlbmQoc2xpZGUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHdyYXBOZXh0KHNsaWRlciwgY291bnQpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICAgICAgc2xpZGVyLnRyYWNrLmFwcGVuZChzbGlkZXIuc2xpZGVzWzBdKTtcbiAgICB9XG59XG5mdW5jdGlvbiB1cGRhdGVUcmFuc2Zvcm0oc2xpZGVyKSB7XG4gICAgY29uc3QgeyB0cmFjaywgb2Zmc2V0LCBkcmFnZ2VkIH0gPSBzbGlkZXI7XG4gICAgaWYgKG9mZnNldCA9PT0gMCkge1xuICAgICAgICB0cmFjay5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlM2QoJHtkcmFnZ2VkfXB4LDBweCwwcHgpYDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRyYWNrLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUzZCggIGNhbGMoICR7ZHJhZ2dlZH1weCArICR7b2Zmc2V0fSAqICh2YXIoLS1zbGlkZS13aWR0aCkgKyAke3NsaWRlci5jb25maWcuc2xpZGVHYXB9KSksMHB4LDBweClgO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGVuYWJsZVRyYW5zaXRpb24oc2xpZGVyKSB7XG4gICAgc2xpZGVyLnRyYWNrLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IGAke3NsaWRlci5jb25maWcudHJhbnNpdGlvbkR1cmF0aW9ufW1zYDtcbn1cbmZ1bmN0aW9uIGRpc2FibGVUcmFuc2l0aW9uKHNsaWRlcikge1xuICAgIHNsaWRlci50cmFjay5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBgMG1zYDtcbn1cblxuY29uc3Qgc2xpZGVUaHJlc2hvbGQgPSAxMDtcbmNvbnN0IGlzVG91Y2ggPSAoKSA9PiAnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3c7XG5mdW5jdGlvbiBoYW5kbGVQb2ludGVyRG93bihkb3duRXZlbnQpIHtcbiAgICBjb25zdCB0cmFjayA9IHRoaXM7XG4gICAgY29uc3Qgc2xpZGVyID0gdHJhY2suc2xpZGVyO1xuICAgIGlmIChzbGlkZXIuaXNUcmFuc2l0aW9uaW5nKVxuICAgICAgICByZXR1cm47XG4gICAgc2xpZGVyLmRyYWdnZWQgPSAwO1xuICAgIHRyYWNrLmlzU2Nyb2xsZWQgPSBmYWxzZTtcbiAgICB0cmFjay5zdGFydE1vdXNlQ2xpZW50WCA9XG4gICAgICAgICd0b3VjaGVzJyBpbiBkb3duRXZlbnQgPyBkb3duRXZlbnQudG91Y2hlc1swXS5jbGllbnRYIDogZG93bkV2ZW50LmNsaWVudFg7XG4gICAgaWYgKCEoJ3RvdWNoZXMnIGluIGRvd25FdmVudCkpIHtcbiAgICAgICAgLy8gZG8gbm90IGRpcmVjdGx5IHNldFBvaW50ZXJDYXB0dXJlIG9uIHRyYWNrIC0gaXQgYmxvY2tzIHRoZSBjbGljayBldmVudHNcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL0dvb2dsZUNocm9tZUxhYnMvcG9pbnRlci10cmFja2VyL2lzc3Vlcy80XG4gICAgICAgIGNvbnN0IGVsID0gKGRvd25FdmVudC50YXJnZXQgfHwgdHJhY2spO1xuICAgICAgICBlbC5zZXRQb2ludGVyQ2FwdHVyZShkb3duRXZlbnQucG9pbnRlcklkKTtcbiAgICB9XG4gICAgZGlzYWJsZVRyYW5zaXRpb24oc2xpZGVyKTtcbiAgICB1cGRhdGVFdmVudExpc3RlbmVyKHRyYWNrLCAnYWRkRXZlbnRMaXN0ZW5lcicpO1xufVxuZnVuY3Rpb24gaGFuZGxlUG9pbnRlck1vdmUobW92ZUV2ZW50KSB7XG4gICAgY29uc3QgdHJhY2sgPSB0aGlzO1xuICAgIGNvbnN0IHggPSAndG91Y2hlcycgaW4gbW92ZUV2ZW50ID8gbW92ZUV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WCA6IG1vdmVFdmVudC5jbGllbnRYO1xuICAgIGNvbnN0IGRyYWdnZWQgPSAodHJhY2suc2xpZGVyLmRyYWdnZWQgPSB4IC0gdHJhY2suc3RhcnRNb3VzZUNsaWVudFgpO1xuICAgIGNvbnN0IGRyYWdnZWRBYnMgPSBNYXRoLmFicyhkcmFnZ2VkKTtcbiAgICAvLyBjb25zaWRlciBkcmFnZ2luZyBvbmx5IGlmIHRoZSB1c2VyIGhhcyBkcmFnZ2VkIG1vcmUgdGhhbiA1cHhcbiAgICBpZiAoZHJhZ2dlZEFicyA+IDUpIHtcbiAgICAgICAgLy8gdHJhY2suc2V0QXR0cmlidXRlKCdkYXRhLWRyYWdnaW5nJywgJ3RydWUnKVxuICAgICAgICB0cmFjay5zbGlkZXIuaXNEcmFnZ2luZyA9IHRydWU7XG4gICAgfVxuICAgIC8vIHByZXZlbnQgdmVydGljYWwgc2Nyb2xsaW5nIGlmIGhvcml6b250YWwgc2Nyb2xsaW5nIGlzIGhhcHBlbmluZ1xuICAgIGlmIChkcmFnZ2VkQWJzID4gMTUpIHtcbiAgICAgICAgbW92ZUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICAgIHRyYWNrLnNsaWRlci5kcmFnZ2VkID0gZHJhZ2dlZDtcbiAgICB1cGRhdGVUcmFuc2Zvcm0odHJhY2suc2xpZGVyKTtcbiAgICBpZiAoIXRyYWNrLmlzU2Nyb2xsZWQgJiYgdHJhY2suc2xpZGVyLmNvbmZpZy5sb29wKSB7XG4gICAgICAgIGlmIChkcmFnZ2VkID4gc2xpZGVUaHJlc2hvbGQpIHtcbiAgICAgICAgICAgIHRyYWNrLmlzU2Nyb2xsZWQgPSB0cnVlO1xuICAgICAgICAgICAgdHJhY2suc2xpZGVyLnByZXYoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGhhbmRsZVBvaW50ZXJVcCgpIHtcbiAgICBjb25zdCB0cmFjayA9IHRoaXM7XG4gICAgY29uc3QgZHJhZ2dlZCA9IHRyYWNrLnNsaWRlci5kcmFnZ2VkO1xuICAgIHRyYWNrLnNsaWRlci5pc0RyYWdnaW5nID0gZmFsc2U7XG4gICAgdXBkYXRlRXZlbnRMaXN0ZW5lcih0cmFjaywgJ3JlbW92ZUV2ZW50TGlzdGVuZXInKTtcbiAgICAvLyByZXNldCBkcmFnXG4gICAgdHJhY2suc2xpZGVyLmRyYWdnZWQgPSAwO1xuICAgIHVwZGF0ZVRyYW5zZm9ybSh0cmFjay5zbGlkZXIpO1xuICAgIGVuYWJsZVRyYW5zaXRpb24odHJhY2suc2xpZGVyKTtcbiAgICBpZiAoIXRyYWNrLmlzU2Nyb2xsZWQpIHtcbiAgICAgICAgaWYgKGRyYWdnZWQgPCAtMSAqIHNsaWRlVGhyZXNob2xkKSB7XG4gICAgICAgICAgICB0cmFjay5zbGlkZXIubmV4dCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRyYWdnZWQgPiBzbGlkZVRocmVzaG9sZCkge1xuICAgICAgICAgICAgdHJhY2suc2xpZGVyLnByZXYoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmNvbnN0IHByZXZlbnREZWZhdWx0ID0gKGV2ZW50KSA9PiBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuLyoqXG4gKiBkcmFnIGJhc2VkIG5hdmlnYXRpb24gZm9yIHNsaWRlclxuICovXG5mdW5jdGlvbiBkcmFnU3VwcG9ydChzbGlkZXIpIHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgY29uc3QgdHJhY2sgPSBzbGlkZXIudHJhY2s7XG4gICAgdHJhY2suc2xpZGVyID0gc2xpZGVyO1xuICAgIGNvbnN0IGV2ZW50ID0gaXNUb3VjaCgpID8gJ3RvdWNoc3RhcnQnIDogJ3BvaW50ZXJkb3duJztcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgdHJhY2suYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlUG9pbnRlckRvd24pO1xuICAgIC8vIHByZXZlbnQgY2xpY2sgZGVmYXVsdCB3aGVuIHNsaWRlciBpcyBiZWluZyBkcmFnZ2VkIG9yIHRyYW5zaXRpb25pbmdcbiAgICB0cmFjay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICBpZiAoc2xpZGVyLmlzVHJhbnNpdGlvbmluZyB8fCBzbGlkZXIuaXNEcmFnZ2luZykge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIC8vIHByZXZlbnQgZHJhZ2dpbmcgb2YgZWxlbWVudHMgaW5zaWRlIHRoZSBzbGlkZXJcbiAgICB0cmFjay5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCBwcmV2ZW50RGVmYXVsdCk7XG59XG5mdW5jdGlvbiB1cGRhdGVFdmVudExpc3RlbmVyKHRyYWNrLCBtZXRob2QpIHtcbiAgICB0cmFja1ttZXRob2RdKCdjb250ZXh0bWVudScsIGhhbmRsZVBvaW50ZXJVcCk7XG4gICAgaWYgKGlzVG91Y2goKSkge1xuICAgICAgICB0cmFja1ttZXRob2RdKCd0b3VjaGVuZCcsIGhhbmRsZVBvaW50ZXJVcCk7XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgdHJhY2tbbWV0aG9kXSgndG91Y2htb3ZlJywgaGFuZGxlUG9pbnRlck1vdmUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdHJhY2tbbWV0aG9kXSgncG9pbnRlcnVwJywgaGFuZGxlUG9pbnRlclVwKTtcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICB0cmFja1ttZXRob2RdKCdwb2ludGVybW92ZScsIGhhbmRsZVBvaW50ZXJNb3ZlKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUF1dG9wbGF5KHNsaWRlcikge1xuICAgIGNvbnN0IGNvbmZpZyA9IHNsaWRlci5jb25maWc7XG4gICAgaWYgKCFjb25maWcuZW5hYmxlQXV0b3BsYXkpXG4gICAgICAgIHJldHVybjtcbiAgICBjb25zdCBkaXIgPSBjb25maWcuYXV0b3BsYXlEaXJlY3Rpb24gPT09ICd0byBsZWZ0JyA/ICduZXh0JyA6ICdwcmV2JztcbiAgICBzbGlkZXIuYXV0b3BsYXlUaW1lciA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgc2xpZGVyW2Rpcl0oKTtcbiAgICB9LCBjb25maWcuYXV0b3BsYXlJbnRlcnZhbCk7XG4gICAgaWYgKGNvbmZpZy5zdG9wQXV0b3BsYXlPbkludGVyYWN0aW9uKSB7XG4gICAgICAgIHNsaWRlci5lbC5hZGRFdmVudExpc3RlbmVyKGlzVG91Y2goKSA/ICd0b3VjaHN0YXJ0JyA6ICdtb3VzZWRvd24nLCAoKSA9PiB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHNsaWRlci5hdXRvcGxheVRpbWVyKTtcbiAgICAgICAgfSwgeyBvbmNlOiB0cnVlIH0pO1xuICAgIH1cbn1cblxuY29uc3QgZGVmYXVsdENvbmZpZyA9IHtcbiAgICAvLyBsYXlvdXRcbiAgICBzbGlkZUdhcDogJzIwcHgnLFxuICAgIHNsaWRlc1RvU2Nyb2xsOiAxLFxuICAgIHNsaWRlc1RvU2hvdzogMSxcbiAgICAvLyBiZWhhdmlvclxuICAgIGxvb3A6IHRydWUsXG4gICAgLy8gYXV0b3BsYXlcbiAgICBlbmFibGVBdXRvcGxheTogZmFsc2UsXG4gICAgc3RvcEF1dG9wbGF5T25JbnRlcmFjdGlvbjogdHJ1ZSxcbiAgICBhdXRvcGxheUludGVydmFsOiAzMDAwLFxuICAgIGF1dG9wbGF5RGlyZWN0aW9uOiAndG8gbGVmdCcsXG4gICAgLy8gcGFnaW5hdGlvblxuICAgIGVuYWJsZVBhZ2luYXRpb246IHRydWUsXG4gICAgLy8gdHJhbnNpdGlvblxuICAgIHRyYW5zaXRpb25EdXJhdGlvbjogMzAwLFxuICAgIHRyYW5zaXRpb25UaW1pbmdGdW5jdGlvbjogJ2Vhc2UnLFxuICAgIGRyYWdnYWJsZTogdHJ1ZSxcbn07XG5mdW5jdGlvbiBjcmVhdGVDb25maWcoYmxhemVDb25maWcpIHtcbiAgICAvLyBzdGFydCB3aXRoIGRlZmF1bHQgY29uZmlnIGNsb25lXG4gICAgY29uc3QgY29uZmlnID0geyAuLi5kZWZhdWx0Q29uZmlnIH07XG4gICAgZm9yIChjb25zdCBtZWRpYSBpbiBibGF6ZUNvbmZpZykge1xuICAgICAgICAvLyBpZiB0aGUgbWVkaWEgbWF0Y2hlcywgb3ZlcnJpZGUgdGhlIGNvbmZpZyB3aXRoIG1lZGlhIGNvbmZpZ1xuICAgICAgICBpZiAod2luZG93Lm1hdGNoTWVkaWEobWVkaWEpLm1hdGNoZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lZGlhQ29uZmlnID0gYmxhemVDb25maWdbbWVkaWFdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbWVkaWFDb25maWcpIHtcbiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICAgICAgICAgICAgY29uZmlnW2tleV0gPSBtZWRpYUNvbmZpZ1trZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjb25maWc7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZU5hdmlnYXRpb24oc2xpZGVyKSB7XG4gICAgY29uc3QgcHJldiA9IHNsaWRlci5lbC5xdWVyeVNlbGVjdG9yKCcuYmxhemUtcHJldicpO1xuICAgIGNvbnN0IG5leHQgPSBzbGlkZXIuZWwucXVlcnlTZWxlY3RvcignLmJsYXplLW5leHQnKTtcbiAgICBpZiAocHJldikge1xuICAgICAgICBwcmV2Lm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICBzbGlkZXIucHJldigpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAobmV4dCkge1xuICAgICAgICBuZXh0Lm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICBzbGlkZXIubmV4dCgpO1xuICAgICAgICB9O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlUGFnaW5hdGlvbihzbGlkZXIpIHtcbiAgICBpZiAoIXNsaWRlci5jb25maWcuZW5hYmxlUGFnaW5hdGlvbiB8fCBzbGlkZXIuaXNTdGF0aWMpXG4gICAgICAgIHJldHVybjtcbiAgICBjb25zdCBwYWdpbmF0aW9uQ29udGFpbmVyID0gc2xpZGVyLmVsLnF1ZXJ5U2VsZWN0b3IoJy5ibGF6ZS1wYWdpbmF0aW9uJyk7XG4gICAgaWYgKCFwYWdpbmF0aW9uQ29udGFpbmVyKVxuICAgICAgICByZXR1cm47XG4gICAgc2xpZGVyLnBhZ2luYXRpb25CdXR0b25zID0gW107XG4gICAgY29uc3QgdG90YWwgPSBzbGlkZXIuc3RhdGVzLmxlbmd0aDtcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdG90YWw7IGluZGV4KyspIHtcbiAgICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIHNsaWRlci5wYWdpbmF0aW9uQnV0dG9ucy5wdXNoKGJ1dHRvbik7XG4gICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IDEgKyBpbmRleCArICcnO1xuICAgICAgICBidXR0b24uYXJpYUxhYmVsID0gYCR7aW5kZXggKyAxfSBvZiAke3RvdGFsfWA7XG4gICAgICAgIHBhZ2luYXRpb25Db250YWluZXIuYXBwZW5kKGJ1dHRvbik7XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgYnV0dG9uLnNsaWRlciA9IHNsaWRlcjtcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICBidXR0b24uaW5kZXggPSBpbmRleDtcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICBidXR0b24ub25jbGljayA9IGhhbmRsZVBhZ2luYXRpb25CdXR0b25DbGljaztcbiAgICB9XG4gICAgLy8gaW5pdGlhbGx5IHRoZSBmaXJzdCBidXR0b24gaXMgYWN0aXZlXG4gICAgc2xpZGVyLnBhZ2luYXRpb25CdXR0b25zWzBdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xufVxuZnVuY3Rpb24gaGFuZGxlUGFnaW5hdGlvbkJ1dHRvbkNsaWNrKCkge1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5pbmRleDtcbiAgICBjb25zdCBzbGlkZXIgPSB0aGlzLnNsaWRlcjtcbiAgICBjb25zdCBzdGF0ZUluZGV4ID0gc2xpZGVyLnN0YXRlSW5kZXg7XG4gICAgY29uc3QgbG9vcCA9IHNsaWRlci5jb25maWcubG9vcDtcbiAgICBjb25zdCBkaWZmID0gTWF0aC5hYnMoaW5kZXggLSBzdGF0ZUluZGV4KTtcbiAgICBjb25zdCBpbnZlcnNlRGlmZiA9IHNsaWRlci5zdGF0ZXMubGVuZ3RoIC0gZGlmZjtcbiAgICBjb25zdCBpc0RpZmZMYXJnZXJUaGFuSGFsZiA9IGRpZmYgPiBzbGlkZXIuc3RhdGVzLmxlbmd0aCAvIDI7XG4gICAgY29uc3Qgc2Nyb2xsT3Bwb3NpdGUgPSBpc0RpZmZMYXJnZXJUaGFuSGFsZiAmJiBsb29wO1xuICAgIC8vIGlmIHRhcmdldCBzdGF0ZSBpcyBhaGVhZCBvZiBjdXJyZW50IHN0YXRlXG4gICAgaWYgKGluZGV4ID4gc3RhdGVJbmRleCkge1xuICAgICAgICAvLyBidXQgdGhlIGRpZmYgaXMgdG9vIGxhcmdlXG4gICAgICAgIGlmIChzY3JvbGxPcHBvc2l0ZSkge1xuICAgICAgICAgICAgLy8gc2Nyb2xsIGluIG9wcG9zaXRlIGRpcmVjdGlvbiB0byByZWR1Y2Ugc2Nyb2xsaW5nXG4gICAgICAgICAgICBzbGlkZXIucHJldihpbnZlcnNlRGlmZik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBzY3JvbGwgbm9ybWFsbHlcbiAgICAgICAgICAgIHNsaWRlci5uZXh0KGRpZmYpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGlmIHRhcmdldCBzdGF0ZSBpcyBiZWZvcmUgY3VycmVudCBzdGF0ZVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBidXQgdGhlIGRpZmYgaXMgdG9vIGxhcmdlXG4gICAgICAgIGlmIChzY3JvbGxPcHBvc2l0ZSkge1xuICAgICAgICAgICAgLy8gc2Nyb2xsIGluIG9wcG9zaXRlIGRpcmVjdGlvblxuICAgICAgICAgICAgc2xpZGVyLm5leHQoaW52ZXJzZURpZmYpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gc2Nyb2xsIG5vcm1hbGx5XG4gICAgICAgICAgICBzbGlkZXIucHJldihkaWZmKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gaXNUcmFuc2l0aW9uaW5nKHNsaWRlciwgdGltZSA9IHNsaWRlci5jb25maWcudHJhbnNpdGlvbkR1cmF0aW9uKSB7XG4gICAgc2xpZGVyLmlzVHJhbnNpdGlvbmluZyA9IHRydWU7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHNsaWRlci5pc1RyYW5zaXRpb25pbmcgPSBmYWxzZTtcbiAgICB9LCB0aW1lKTtcbn1cbmNsYXNzIEJsYXplU2xpZGVyIGV4dGVuZHMgQXV0b21hdGEge1xuICAgIGNvbnN0cnVjdG9yKGJsYXplU2xpZGVyRWwsIGJsYXplQ29uZmlnKSB7XG4gICAgICAgIGNvbnN0IHRyYWNrID0gYmxhemVTbGlkZXJFbC5xdWVyeVNlbGVjdG9yKCcuYmxhemUtdHJhY2snKTtcbiAgICAgICAgY29uc3Qgc2xpZGVzID0gdHJhY2suY2hpbGRyZW47XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IGJsYXplQ29uZmlnXG4gICAgICAgICAgICA/IGNyZWF0ZUNvbmZpZyhibGF6ZUNvbmZpZylcbiAgICAgICAgICAgIDogeyAuLi5kZWZhdWx0Q29uZmlnIH07XG4gICAgICAgIHN1cGVyKHNsaWRlcy5sZW5ndGgsIGNvbmZpZyk7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgICAgICB0aGlzLmVsID0gYmxhemVTbGlkZXJFbDtcbiAgICAgICAgdGhpcy50cmFjayA9IHRyYWNrO1xuICAgICAgICB0aGlzLnNsaWRlcyA9IHNsaWRlcztcbiAgICAgICAgdGhpcy5vZmZzZXQgPSAwO1xuICAgICAgICB0aGlzLmRyYWdnZWQgPSAwO1xuICAgICAgICB0aGlzLmlzRHJhZ2dpbmcgPSBmYWxzZTtcbiAgICAgICAgLy8gQHRzLWlnbm9yZSAtIGZvciBkZWJ1Z2dpbmdcbiAgICAgICAgdGhpcy5lbC5ibGF6ZVNsaWRlciA9IHRoaXM7XG4gICAgICAgIHRoaXMucGFzc2VkQ29uZmlnID0gYmxhemVDb25maWc7XG4gICAgICAgIGNvbnN0IHNsaWRlciA9IHRoaXM7XG4gICAgICAgIHRyYWNrLnNsaWRlciA9IHNsaWRlcjtcbiAgICAgICAgY29uc3RydWN0KGNvbmZpZywgc2xpZGVyKTtcbiAgICAgICAgLy8gdGhyb3R0bGVkIHRvIHJlZnJlc2ggZXZlcnkgMjAwbXMgd2hlbiByZXNpemluZ1xuICAgICAgICBsZXQgaWdub3JlUmVzaXplID0gZmFsc2U7XG4gICAgICAgIGxldCB3aWR0aCA9IDA7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAod2lkdGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG5ld1dpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgICAgICAvLyBpZ25vcmUgaGVpZ2h0IGNoYW5nZSAtIG9ubHkgcmVmcmVzaCBpZiB0aGUgd2lkdGggaXMgY2hhbmdlZFxuICAgICAgICAgICAgaWYgKHdpZHRoID09PSBuZXdXaWR0aClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB3aWR0aCA9IG5ld1dpZHRoO1xuICAgICAgICAgICAgaWYgKCFpZ25vcmVSZXNpemUpIHtcbiAgICAgICAgICAgICAgICBpZ25vcmVSZXNpemUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzbGlkZXIucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICBpZ25vcmVSZXNpemUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9LCAyMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbmV4dChjb3VudCkge1xuICAgICAgICBpZiAodGhpcy5pc1RyYW5zaXRpb25pbmcpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IHRyYW5zaXRpb24gPSBzdXBlci5uZXh0KGNvdW50KTtcbiAgICAgICAgaWYgKCF0cmFuc2l0aW9uKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBbcHJldlN0YXRlSW5kZXgsIHNsaWRlQ291bnRdID0gdHJhbnNpdGlvbjtcbiAgICAgICAgaGFuZGxlU3RhdGVDaGFuZ2UodGhpcywgcHJldlN0YXRlSW5kZXgpO1xuICAgICAgICBpc1RyYW5zaXRpb25pbmcodGhpcyk7XG4gICAgICAgIHNjcm9sbE5leHQodGhpcywgc2xpZGVDb3VudCk7XG4gICAgfVxuICAgIHByZXYoY291bnQpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNUcmFuc2l0aW9uaW5nKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCB0cmFuc2l0aW9uID0gc3VwZXIucHJldihjb3VudCk7XG4gICAgICAgIGlmICghdHJhbnNpdGlvbilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgW3ByZXZTdGF0ZUluZGV4LCBzbGlkZUNvdW50XSA9IHRyYW5zaXRpb247XG4gICAgICAgIGhhbmRsZVN0YXRlQ2hhbmdlKHRoaXMsIHByZXZTdGF0ZUluZGV4KTtcbiAgICAgICAgaXNUcmFuc2l0aW9uaW5nKHRoaXMpO1xuICAgICAgICBzY3JvbGxQcmV2KHRoaXMsIHNsaWRlQ291bnQpO1xuICAgIH1cbiAgICBzdG9wQXV0b3BsYXkoKSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5hdXRvcGxheVRpbWVyKTtcbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgLy8gcmVtb3ZlIHNpZGUgZWZmZWN0cyB0aGF0IHdvbid0IGJlIG92ZXJyaWRkZW4gYnkgY29uc3RydWN0KClcbiAgICAgICAgLy8gcmVtb3ZlIG9sZCBkcmFnIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgdGhpcy50cmFjay5yZW1vdmVFdmVudExpc3RlbmVyKGlzVG91Y2goKSA/ICd0b3VjaHN0YXJ0JyA6ICdwb2ludGVyZG93bicsIFxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICAgIGhhbmRsZVBvaW50ZXJEb3duKTtcbiAgICAgICAgLy8gc3RvcCBhdXRvcGxheVxuICAgICAgICB0aGlzLnN0b3BBdXRvcGxheSgpO1xuICAgICAgICAvLyByZW1vdmUgcGFnaW5hdGlvbiBidXR0b25zXG4gICAgICAgIHRoaXMucGFnaW5hdGlvbkJ1dHRvbnM/LmZvckVhY2goKGJ1dHRvbikgPT4gYnV0dG9uLnJlbW92ZSgpKTtcbiAgICAgICAgLy8gcmVtb3ZlIGNsYXNzZXNcbiAgICAgICAgdGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKCdzdGF0aWMnKTtcbiAgICAgICAgdGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKFNUQVJUKTtcbiAgICB9XG4gICAgcmVmcmVzaCgpIHtcbiAgICAgICAgY29uc3QgbmV3Q29uZmlnID0gdGhpcy5wYXNzZWRDb25maWdcbiAgICAgICAgICAgID8gY3JlYXRlQ29uZmlnKHRoaXMucGFzc2VkQ29uZmlnKVxuICAgICAgICAgICAgOiB7IC4uLmRlZmF1bHRDb25maWcgfTtcbiAgICAgICAgdGhpcy5kZXN0cm95KCk7XG4gICAgICAgIGNvbnN0cnVjdChuZXdDb25maWcsIHRoaXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdWJzY3JpYmUgZm9yIHNsaWRlIGNoYW5nZSBldmVudFxuICAgICAqIFJldHVybnMgYSBmdW5jdGlvbiB0byB1bnN1YnNjcmliZSBmcm9tIHNsaWRlIGNoYW5nZSBldmVudFxuICAgICAqL1xuICAgIG9uU2xpZGUoY2IpIHtcbiAgICAgICAgaWYgKCF0aGlzLm9uU2xpZGVDYnMpXG4gICAgICAgICAgICB0aGlzLm9uU2xpZGVDYnMgPSBuZXcgU2V0KCk7XG4gICAgICAgIHRoaXMub25TbGlkZUNicy5hZGQoY2IpO1xuICAgICAgICByZXR1cm4gKCkgPT4gdGhpcy5vblNsaWRlQ2JzLmRlbGV0ZShjYik7XG4gICAgfVxufVxuZnVuY3Rpb24gaGFuZGxlU3RhdGVDaGFuZ2Uoc2xpZGVyLCBwcmV2U3RhdGVJbmRleCkge1xuICAgIGNvbnN0IGNsYXNzTGlzdCA9IHNsaWRlci5lbC5jbGFzc0xpc3Q7XG4gICAgY29uc3Qgc3RhdGVJbmRleCA9IHNsaWRlci5zdGF0ZUluZGV4O1xuICAgIGNvbnN0IGJ1dHRvbnMgPSBzbGlkZXIucGFnaW5hdGlvbkJ1dHRvbnM7XG4gICAgaWYgKCFzbGlkZXIuY29uZmlnLmxvb3ApIHtcbiAgICAgICAgaWYgKHN0YXRlSW5kZXggPT09IDApIHtcbiAgICAgICAgICAgIGNsYXNzTGlzdC5hZGQoU1RBUlQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY2xhc3NMaXN0LnJlbW92ZShTVEFSVCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXRlSW5kZXggPT09IHNsaWRlci5zdGF0ZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgY2xhc3NMaXN0LmFkZChFTkQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY2xhc3NMaXN0LnJlbW92ZShFTkQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChidXR0b25zICYmIHNsaWRlci5jb25maWcuZW5hYmxlUGFnaW5hdGlvbikge1xuICAgICAgICBidXR0b25zW3ByZXZTdGF0ZUluZGV4XS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgYnV0dG9uc1tzdGF0ZUluZGV4XS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICB9XG59XG5mdW5jdGlvbiBjb25zdHJ1Y3QoY29uZmlnLCBzbGlkZXIpIHtcbiAgICBjb25zdCB0cmFjayA9IHNsaWRlci50cmFjaztcbiAgICBzbGlkZXIuc2xpZGVzID0gdHJhY2suY2hpbGRyZW47XG4gICAgc2xpZGVyLm9mZnNldCA9IDA7XG4gICAgc2xpZGVyLmNvbmZpZyA9IGNvbmZpZztcbiAgICBjb25zdHJ1Y3RBdXRvbWF0YShzbGlkZXIsIHNsaWRlci50b3RhbFNsaWRlcywgY29uZmlnKTtcbiAgICAvLyBpZiBhIHNpZGUgZWZmZWN0IGlzIGluIGNvbmRpdGlvbiAtIG1ha2Ugc3VyZSB0byBhZGQgaXQgZm9yIGJvdGggY29uZGl0aW9ucyAtIHNvIGl0IGdldHMgY2xlYW5lZCB1cFxuICAgIC8vIHdoZW4gcmVmcmVzaCBpcyBjYWxsZWRcbiAgICBpZiAoIWNvbmZpZy5sb29wKSB7XG4gICAgICAgIHNsaWRlci5lbC5jbGFzc0xpc3QuYWRkKFNUQVJUKTtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy5lbmFibGVBdXRvcGxheSAmJiAhY29uZmlnLmxvb3ApIHtcbiAgICAgICAgaWYgKERFVikge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdlbmFibGVBdXRvcGxheTp0cnVlIGlzIG5vdCBjb25zaXN0ZW50IHdpdGggbG9vcDpmYWxzZSwgYXV0by1maXhpbmcgd2l0aCBlbmFibGVBdXRvcGxheTpmYWxzZScpO1xuICAgICAgICB9XG4gICAgICAgIGNvbmZpZy5lbmFibGVBdXRvcGxheSA9IGZhbHNlO1xuICAgIH1cbiAgICB0cmFjay5zdHlsZS50cmFuc2l0aW9uUHJvcGVydHkgPSAndHJhbnNmb3JtJztcbiAgICB0cmFjay5zdHlsZS50cmFuc2l0aW9uVGltaW5nRnVuY3Rpb24gPSBzbGlkZXIuY29uZmlnLnRyYW5zaXRpb25UaW1pbmdGdW5jdGlvbjtcbiAgICB0cmFjay5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBgJHtzbGlkZXIuY29uZmlnLnRyYW5zaXRpb25EdXJhdGlvbn1tc2A7XG4gICAgY29uc3QgeyBzbGlkZXNUb1Nob3csIHNsaWRlR2FwIH0gPSBzbGlkZXIuY29uZmlnO1xuICAgIHNsaWRlci5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1zbGlkZXMtdG8tc2hvdycsIHNsaWRlc1RvU2hvdyArICcnKTtcbiAgICBzbGlkZXIuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tc2xpZGUtZ2FwJywgc2xpZGVHYXApO1xuICAgIGlmICghc2xpZGVyLmlzU3RhdGljKSB7XG4gICAgICAgIGlmIChjb25maWcuZHJhZ2dhYmxlKSB7XG4gICAgICAgICAgICBkcmFnU3VwcG9ydChzbGlkZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBzbGlkZXIuZWwuY2xhc3NMaXN0LmFkZCgnc3RhdGljJyk7XG4gICAgfVxuICAgIGhhbmRsZVBhZ2luYXRpb24oc2xpZGVyKTtcbiAgICBoYW5kbGVBdXRvcGxheShzbGlkZXIpO1xuICAgIGhhbmRsZU5hdmlnYXRpb24oc2xpZGVyKTtcbiAgICB1cGRhdGVUcmFuc2Zvcm0oc2xpZGVyKTtcbn1cblxuZXhwb3J0IHsgQmxhemVTbGlkZXIgYXMgZGVmYXVsdCB9O1xuIiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IHdpbmRvd1tcIndwXCJdW1wiZWxlbWVudFwiXTsiLCJpbXBvcnQgeyBCbGF6ZUNvbmZpZyB9IGZyb20gJ2JsYXplLXNsaWRlcic7XG5cbmV4cG9ydCBjb25zdCBHQUxMRVJZX0NPUkVfTkFNRVNQQUNFOiBzdHJpbmcgPSAnY29yZS9nYWxsZXJ5JztcbmV4cG9ydCBjb25zdCBHQUxMRVJZX1ZBUklBVElPTl9OQU1FU1BBQ0U6IHN0cmluZyA9ICdjb3JlL3NsaWRlcic7XG5leHBvcnQgY29uc3QgR0FMTEVSWV9WQVJJQVRJT05fQ0xBU1NOQU1FOiBzdHJpbmcgPSAnZ2FsbGVyeS1zbGlkZXInO1xuXG5leHBvcnQgY29uc3QgZGVmYXVsdENvbmZpZzogQmxhemVDb25maWcgPSB7XG5cdGFsbDoge1xuXHRcdC8vIGxheW91dFxuXHRcdHNsaWRlc1RvU2hvdzogMSxcblx0XHRzbGlkZXNUb1Njcm9sbDogMSxcblx0XHRzbGlkZUdhcDogJzIwcHgnLFxuXHRcdGRyYWdnYWJsZTogdHJ1ZSxcblxuXHRcdC8vIGxvb3Bcblx0XHRsb29wOiB0cnVlLFxuXG5cdFx0Ly8gYXV0b3BsYXlcblx0XHRlbmFibGVBdXRvcGxheTogZmFsc2UsXG5cdFx0c3RvcEF1dG9wbGF5T25JbnRlcmFjdGlvbjogdHJ1ZSxcblx0XHRhdXRvcGxheUludGVydmFsOiAzMDAwLFxuXHRcdGF1dG9wbGF5RGlyZWN0aW9uOiAndG8gbGVmdCcsXG5cblx0XHQvLyBwYWdpbmF0aW9uXG5cdFx0ZW5hYmxlUGFnaW5hdGlvbjogdHJ1ZSxcblxuXHRcdC8vIHRyYW5zaXRpb25cblx0XHR0cmFuc2l0aW9uRHVyYXRpb246IDUwMCxcblx0XHR0cmFuc2l0aW9uVGltaW5nRnVuY3Rpb246ICdlYXNlJyxcblx0fSxcbn07XG4iLCJpbXBvcnQgQmxhemVTbGlkZXIsIHsgQmxhemVDb25maWcgfSBmcm9tICdibGF6ZS1zbGlkZXInO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdAd29yZHByZXNzL2VsZW1lbnQnO1xuaW1wb3J0IHtcblx0ZGVmYXVsdENvbmZpZyxcblx0R0FMTEVSWV9WQVJJQVRJT05fQ0xBU1NOQU1FLFxuXHRHQUxMRVJZX1ZBUklBVElPTl9OQU1FU1BBQ0UsXG59IGZyb20gJy4vY29uc3RhbnRzJztcbmltcG9ydCB7IEJsb2NrQXR0cmlidXRlcyB9IGZyb20gJ0B3b3JkcHJlc3MvYmxvY2tzJztcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUJsYXplU2xpZGVyKCBjb25maWc/OiBCbGF6ZUNvbmZpZyApIHtcblx0Y29uc3Qgc2xpZGVyUmVmID0gdXNlUmVmPCBCbGF6ZVNsaWRlciA+KCk7XG5cdGNvbnN0IGVsUmVmID0gdXNlUmVmPCBIVE1MRGl2RWxlbWVudCB8IG51bGwgPiggbnVsbCApO1xuXG5cdHVzZUVmZmVjdCggKCkgPT4ge1xuXHRcdGlmICggISBzbGlkZXJSZWYuY3VycmVudCApIHtcblx0XHRcdHNsaWRlclJlZi5jdXJyZW50ID0gbmV3IEJsYXplU2xpZGVyKCBlbFJlZi5jdXJyZW50ISwgY29uZmlnICk7XG5cdFx0fVxuXHR9LCBbXSApO1xuXG5cdHJldHVybiBlbFJlZjtcbn1cblxuLyoqXG4gKiBTZWFyY2ggaW50byBibG9jayBhdHRyaWJ1dGVzIGZvciBhbiBpdGVtIFwibmFtZXNwYWNlXCIgdGhhdCBtYXRjaGVzIHRoZSBzbGlkZXIgdmFyaWF0aW9uIG5hbWVcbiAqXG4gKiBAcGFyYW0gIGF0dHJpYnV0ZVxuICogQHBhcmFtICBhdHRyaWJ1dGUuY2xhc3NOYW1lXG4gKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIHRoZSBibG9jayBpcyB0aGUgc2xpZGVyXG4gKi9cbmV4cG9ydCBjb25zdCBpc0FjdGl2ZSA9ICggeyBjbGFzc05hbWUgfTogQmxvY2tBdHRyaWJ1dGVzICkgPT4ge1xuXHRyZXR1cm4gY2xhc3NOYW1lID09PSBHQUxMRVJZX1ZBUklBVElPTl9DTEFTU05BTUU7XG59O1xuXG4vKipcbiAqIERldGVybWluZXMgaWYgdGhlIGFjdGl2ZSB2YXJpYXRpb24gaXMgdGhlIHNsaWRlciAodGhlIGNvcmUvZ2FsbGVyeSB2YXJpYXRpb24pXG4gKlxuICogQHBhcmFtICBwcm9wc1xuICogQHBhcmFtICBwcm9wcy5jbGFzc05hbWVcbiAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUgaWYgdGhlIHZhcmlhdGlvbiBpcyB0aGUgc2xpZGVyXG4gKi9cbmV4cG9ydCBjb25zdCBpc1NsaWRlciA9ICggeyBjbGFzc05hbWUgfTogeyBjbGFzc05hbWU6IHN0cmluZyB9ICkgPT4ge1xuXHRyZXR1cm4gY2xhc3NOYW1lID09PSBHQUxMRVJZX1ZBUklBVElPTl9OQU1FU1BBQ0U7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0QmxhemVDb25maWcgPSAoIGNvbmZpZzogUmVjb3JkPCBzdHJpbmcsIGFueSA+ICkgPT4ge1xuXHRyZXR1cm4ge1xuXHRcdGFsbDoge1xuXHRcdFx0Li4uY29uZmlnLFxuXHRcdH0sXG5cdFx0Li4uZGVmYXVsdENvbmZpZyxcblx0fSBhcyBCbGF6ZUNvbmZpZztcbn07XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfZXh0ZW5kcygpIHtcbiAgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduID8gT2JqZWN0LmFzc2lnbi5iaW5kKCkgOiBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07XG4gICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9O1xuICByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn0iLCJjb25zdCBfX1dFQlBBQ0tfTkFNRVNQQUNFX09CSkVDVF9fID0gd2luZG93W1wiUmVhY3RcIl07IiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IHdpbmRvd1tcIndwXCJdW1wiaTE4blwiXTsiLCJjb25zdCBfX1dFQlBBQ0tfTkFNRVNQQUNFX09CSkVDVF9fID0gd2luZG93W1wid3BcIl1bXCJjb21wb3NlXCJdOyIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSB3aW5kb3dbXCJ3cFwiXVtcImJsb2NrRWRpdG9yXCJdOyIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSB3aW5kb3dbXCJ3cFwiXVtcImNvbXBvbmVudHNcIl07IiwiY29uc3QgQmxhemVDb250cm9scyA9ICgpOiBKU1guRWxlbWVudCA9PiB7XG5cdHJldHVybiAoXG5cdFx0PGRpdiBjbGFzc05hbWU9XCJjb250cm9sc1wiPlxuXHRcdFx0PGJ1dHRvbiBjbGFzc05hbWU9XCJibGF6ZS1wcmV2XCI+cHJldjwvYnV0dG9uPlxuXHRcdFx0PGRpdiBjbGFzc05hbWU9XCJibGF6ZS1wYWdpbmF0aW9uXCI+PC9kaXY+XG5cdFx0XHQ8YnV0dG9uIGNsYXNzTmFtZT1cImJsYXplLW5leHRcIj5uZXh0PC9idXR0b24+XG5cdFx0PC9kaXY+XG5cdCk7XG59O1xuZXhwb3J0IGRlZmF1bHQgQmxhemVDb250cm9scztcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBfXyB9IGZyb20gJ0B3b3JkcHJlc3MvaTE4bic7XG5pbXBvcnQgeyBjcmVhdGVIaWdoZXJPcmRlckNvbXBvbmVudCB9IGZyb20gJ0B3b3JkcHJlc3MvY29tcG9zZSc7XG5pbXBvcnQgeyB1c2VCbGF6ZVNsaWRlciwgaXNTbGlkZXIsIGlzQWN0aXZlLCBnZXRCbGF6ZUNvbmZpZyB9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHsgSW5zcGVjdG9yQ29udHJvbHMgfSBmcm9tICdAd29yZHByZXNzL2Jsb2NrLWVkaXRvcic7XG5pbXBvcnQgeyBQYW5lbEJvZHksIFJhbmdlQ29udHJvbCwgVG9nZ2xlQ29udHJvbCB9IGZyb20gJ0B3b3JkcHJlc3MvY29tcG9uZW50cyc7XG5pbXBvcnQgQmxhemVDb250cm9scyBmcm9tICcuL0NvbXBvbmVudHMvQ29udHJvbHMnO1xuXG4vKipcbiAqIFRoZSBzYXZlIGZ1bmN0aW9uIGRlZmluZXMgdGhlIHdheSBpbiB3aGljaCB0aGUgZGlmZmVyZW50IGF0dHJpYnV0ZXMgc2hvdWxkIGJlIGNvbWJpbmVkIGludG8gdGhlIGZpbmFsIG1hcmt1cCwgd2hpY2ggaXMgdGhlbiBzZXJpYWxpemVkIGludG8gcG9zdF9jb250ZW50LlxuICpcbiAqIEBwYXJhbSAgcHJvcHNcbiAqIEBwYXJhbSAgcHJvcHMuYXR0cmlidXRlcyAtIHRoZSBibG9jayBhdHRyaWJ1dGVzXG4gKiBAZnVuY3Rpb24gT2JqZWN0KCkgeyBbbmF0aXZlIGNvZGVdIH1cbiAqL1xuY29uc3Qgd2l0aENvbnRyb2xzID0gY3JlYXRlSGlnaGVyT3JkZXJDb21wb25lbnQoICggSG9jQ29tcG9uZW50ICkgPT4ge1xuXHRyZXR1cm4gKCBwcm9wcyApID0+IHtcblx0XHRjb25zdCB7IGF0dHJpYnV0ZXMsIGlzU2VsZWN0ZWQsIHNldEF0dHJpYnV0ZXMgfTogUmVjb3JkPCBzdHJpbmcsIGFueSA+ID1cblx0XHRcdHByb3BzO1xuXG5cdFx0aWYgKCAhIGlzQWN0aXZlKCBhdHRyaWJ1dGVzICkgKSByZXR1cm4gPEhvY0NvbXBvbmVudCB7IC4uLnByb3BzIH0gLz47XG5cblx0XHRjb25zb2xlLmxvZyggcHJvcHMgKTtcblxuXHRcdGNvbnN0IGJsYXplY29uZmlnOiBSZWNvcmQ8IHN0cmluZywgYW55ID4gPVxuXHRcdFx0YXR0cmlidXRlcz8uYmxhemVjb25maWcgPz8ge307XG5cblx0XHRjb25zdCBjb25maWcgPSBnZXRCbGF6ZUNvbmZpZyggYmxhemVjb25maWcgKTtcblxuXHRcdHJldHVybiAoXG5cdFx0XHQ8PlxuXHRcdFx0XHQ8ZGl2IGNsYXNzTmFtZT1cImJsYXplLXNsaWRlclwiIHJlZj17IHVzZUJsYXplU2xpZGVyKCBjb25maWcgKSB9PlxuXHRcdFx0XHRcdDxkaXYgY2xhc3NOYW1lPVwiYmxhemUtY29udGFpbmVyXCI+XG5cdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzTmFtZT1cImJsYXplLXRyYWNrLWNvbnRhaW5lclwiPlxuXHRcdFx0XHRcdFx0XHQ8SG9jQ29tcG9uZW50XG5cdFx0XHRcdFx0XHRcdFx0eyAuLi5wcm9wcyB9XG5cdFx0XHRcdFx0XHRcdFx0ZGF0YS1ibGF6ZT17IEpTT04uc3RyaW5naWZ5KCBjb25maWcgKSB9XG5cdFx0XHRcdFx0XHRcdC8+XG5cdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHQ8QmxhemVDb250cm9scyAvPlxuXHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PEluc3BlY3RvckNvbnRyb2xzPlxuXHRcdFx0XHRcdDxQYW5lbEJvZHkgdGl0bGU9XCJTbGlkZXJcIiBpbml0aWFsT3Blbj17IHRydWUgfT5cblx0XHRcdFx0XHRcdDxUb2dnbGVDb250cm9sXG5cdFx0XHRcdFx0XHRcdGxhYmVsPXsgX18oICdMb29wJyApIH1cblx0XHRcdFx0XHRcdFx0Y2hlY2tlZD17IGJsYXplY29uZmlnLmxvb3AgfVxuXHRcdFx0XHRcdFx0XHRvbkNoYW5nZT17ICggdmFsdWU6IGJvb2xlYW4gKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0c2V0QXR0cmlidXRlcygge1xuXHRcdFx0XHRcdFx0XHRcdFx0Li4uYXR0cmlidXRlcyxcblx0XHRcdFx0XHRcdFx0XHRcdGJsYXplY29uZmlnOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdC4uLmJsYXplY29uZmlnLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRsb29wOiB2YWx1ZSxcblx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdFx0XHR9IH1cblx0XHRcdFx0XHRcdC8+XG5cdFx0XHRcdFx0XHQ8VG9nZ2xlQ29udHJvbFxuXHRcdFx0XHRcdFx0XHRsYWJlbD17IF9fKCAnQXV0b3BsYXknICkgfVxuXHRcdFx0XHRcdFx0XHRjaGVja2VkPXsgYmxhemVjb25maWcuZW5hYmxlQXV0b3BsYXkgfVxuXHRcdFx0XHRcdFx0XHRvbkNoYW5nZT17ICggdmFsdWU6IGJvb2xlYW4gKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0c2V0QXR0cmlidXRlcygge1xuXHRcdFx0XHRcdFx0XHRcdFx0Li4uYXR0cmlidXRlcyxcblx0XHRcdFx0XHRcdFx0XHRcdGJsYXplY29uZmlnOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdC4uLmJsYXplY29uZmlnLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRlbmFibGVBdXRvcGxheTogdmFsdWUsXG5cdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0XHRcdFx0fSB9XG5cdFx0XHRcdFx0XHQvPlxuXHRcdFx0XHRcdFx0PFJhbmdlQ29udHJvbFxuXHRcdFx0XHRcdFx0XHRsYWJlbD17IF9fKCAnU2xpZGVzIERpc3BsYXllZCcgKSB9XG5cdFx0XHRcdFx0XHRcdHZhbHVlPXsgYmxhemVjb25maWcuc2xpZGVzVG9TaG93IH1cblx0XHRcdFx0XHRcdFx0b25DaGFuZ2U9eyAoIHZhbHVlOiBudW1iZXIgfCB1bmRlZmluZWQgKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0c2V0QXR0cmlidXRlcygge1xuXHRcdFx0XHRcdFx0XHRcdFx0Li4uYXR0cmlidXRlcyxcblx0XHRcdFx0XHRcdFx0XHRcdGJsYXplY29uZmlnOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdC4uLmJsYXplY29uZmlnLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzbGlkZXNUb1Nob3c6IHZhbHVlLFxuXHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHR9ICk7XG5cdFx0XHRcdFx0XHRcdH0gfVxuXHRcdFx0XHRcdFx0XHRtaW49eyAxIH1cblx0XHRcdFx0XHRcdFx0bWF4PXsgMTAgfVxuXHRcdFx0XHRcdFx0Lz5cblx0XHRcdFx0XHQ8L1BhbmVsQm9keT5cblx0XHRcdFx0PC9JbnNwZWN0b3JDb250cm9scz5cblx0XHRcdDwvPlxuXHRcdCk7XG5cdH07XG59LCAnQ29udHJvbHMnICk7XG5cbmV4cG9ydCBkZWZhdWx0IHdpdGhDb250cm9scztcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBjcmVhdGVIaWdoZXJPcmRlckNvbXBvbmVudCB9IGZyb20gJ0B3b3JkcHJlc3MvY29tcG9zZSc7XG5pbXBvcnQgeyBhZGRGaWx0ZXIgfSBmcm9tICdAd29yZHByZXNzL2hvb2tzJztcbmltcG9ydCB7IGlzQWN0aXZlLCBpc1NsaWRlciwgdXNlQmxhemVTbGlkZXIgfSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCB7XG5cdGRlZmF1bHRDb25maWcsXG5cdEdBTExFUllfQ09SRV9OQU1FU1BBQ0UsXG5cdEdBTExFUllfVkFSSUFUSU9OX05BTUVTUEFDRSxcbn0gZnJvbSAnLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgQmxhemVDb25maWcgfSBmcm9tICdibGF6ZS1zbGlkZXInO1xuXG4vKipcbiAqIFRoZSBzYXZlIGZ1bmN0aW9uIGRlZmluZXMgdGhlIHdheSBpbiB3aGljaCB0aGUgZGlmZmVyZW50IGF0dHJpYnV0ZXMgc2hvdWxkIGJlIGNvbWJpbmVkIGludG8gdGhlIGZpbmFsIG1hcmt1cCwgd2hpY2ggaXMgdGhlbiBzZXJpYWxpemVkIGludG8gcG9zdF9jb250ZW50LlxuICpcbiAqIEBwYXJhbSAgcHJvcHNcbiAqIEBwYXJhbSAgcHJvcHMuYXR0cmlidXRlcyAtIHRoZSBibG9jayBhdHRyaWJ1dGVzXG4gKiBAZnVuY3Rpb24gT2JqZWN0KCkgeyBbbmF0aXZlIGNvZGVdIH1cbiAqL1xuY29uc3Qgd2l0aEVkaXQgPSBjcmVhdGVIaWdoZXJPcmRlckNvbXBvbmVudCggKCBCbG9ja0xpc3RCbG9jayApID0+IHtcblx0cmV0dXJuICggcHJvcHMgKSA9PiB7XG5cdFx0aWYgKCAhIGlzQWN0aXZlKCBwcm9wcy5hdHRyaWJ1dGVzICkgKVxuXHRcdFx0cmV0dXJuIDxCbG9ja0xpc3RCbG9jayB7IC4uLnByb3BzIH0gLz47XG5cblx0XHRjb25zdCB7IGF0dHJpYnV0ZXMgfTogUmVjb3JkPCBzdHJpbmcsIGFueSA+ID0gcHJvcHM7XG5cblx0XHRjb25zdCB7IGJsYXplY29uZmlnIH06IFJlY29yZDwgc3RyaW5nLCBhbnkgPiA9XG5cdFx0XHRhdHRyaWJ1dGVzIHx8IGRlZmF1bHRDb25maWcuYWxsO1xuXG5cdFx0Y29uc3QgbmV3UHJvcHMgPSB7XG5cdFx0XHQuLi5wcm9wcyxcblx0XHRcdHdyYXBwZXJQcm9wczoge1xuXHRcdFx0XHQuLi5wcm9wcy53cmFwcGVyUHJvcHMsXG5cdFx0XHRcdGJsYXplY29uZmlnOiB7IC4uLmJsYXplY29uZmlnIH0sXG5cdFx0XHR9LFxuXHRcdH07XG5cblx0XHRyZXR1cm4gPEJsb2NrTGlzdEJsb2NrIHsgLi4ubmV3UHJvcHMgfSBjbGFzc05hbWU9eyAnYmxhemUtdHJhY2snIH0gLz47XG5cdH07XG59LCAnd2l0aEVkaXQnICk7XG5cbmV4cG9ydCBkZWZhdWx0IHdpdGhFZGl0O1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHJlZ2lzdGVyQmxvY2tWYXJpYXRpb24gfSBmcm9tICdAd29yZHByZXNzL2Jsb2Nrcyc7XG5pbXBvcnQgeyBhZGRGaWx0ZXIgfSBmcm9tICdAd29yZHByZXNzL2hvb2tzJztcblxuaW1wb3J0IHsgaXNBY3RpdmUsIGlzU2xpZGVyIH0gZnJvbSAnLi91dGlscyc7XG5cbi8qKiBhZGQgY29udHJvbHMgdG8gbWFuaXB1bGF0ZSBhdHRycyAqL1xuaW1wb3J0IHdpdGhDb250cm9scyBmcm9tICcuL3dpdGhDb250cm9scyc7XG5pbXBvcnQgU2F2ZSBmcm9tICcuL3NhdmUnO1xuaW1wb3J0IHdpdGhFZGl0IGZyb20gJy4vd2l0aEVkaXQnO1xuXG4vKiogYWRkIHN0eWxlcyB0byBidW5kbGUgKi9cbmltcG9ydCAnLi9zdHlsZS9zdHlsZS1hZG1pbi5zY3NzJztcblxuaW1wb3J0IHtcblx0R0FMTEVSWV9DT1JFX05BTUVTUEFDRSxcblx0R0FMTEVSWV9WQVJJQVRJT05fQ0xBU1NOQU1FLFxuXHRHQUxMRVJZX1ZBUklBVElPTl9OQU1FU1BBQ0UsXG59IGZyb20gJy4vY29uc3RhbnRzJztcblxuLy8gZ2V0IHRoZSBkZWZhdWx0IGNvcmUgZ2FsbGVyeSBhdHRyaWJ1dGVzXG4vLyBjb25zdCBnYWxsZXJ5Q29yZUF0dHIgPVxuLy8gXHQoIHJlZ2lzdGVyQmxvY2tUeXBlKCBHQUxMRVJZX0NPUkVfTkFNRVNQQUNFLCB7fSApPy5hdHRyaWJ1dGVzIGFzIGFueSApIHx8IHt9O1xuXG4vLyBjb25zb2xlLmxvZyggZ2FsbGVyeUNvcmVBdHRyICk7XG5cbnJlZ2lzdGVyQmxvY2tWYXJpYXRpb24oIEdBTExFUllfQ09SRV9OQU1FU1BBQ0UsIHtcblx0bmFtZTogR0FMTEVSWV9WQVJJQVRJT05fTkFNRVNQQUNFLFxuXHR0aXRsZTogJ1NsaWRlciBibG9jaycsXG5cdGRlc2NyaXB0aW9uOiAnQSBzbGlkZXIgdXNpbmcgdGhlIGNvcmUgZ2FsbGVyeScsXG5cdGlzRGVmYXVsdDogZmFsc2UsXG5cdGljb246ICd1bml2ZXJzYWwtYWNjZXNzLWFsdCcsXG5cdGtleXdvcmRzOiBbICdzbGlkZXInIF0sXG5cdGF0dHJpYnV0ZXM6IHtcblx0XHRjbGFzc05hbWU6IEdBTExFUllfVkFSSUFUSU9OX0NMQVNTTkFNRSxcblx0fSxcblx0c2NvcGU6IFsgJ2luc2VydGVyJyBdLFxuXHRpc0FjdGl2ZSxcbn0gKTtcblxuLyoqXG4gKiBpbmZpbml0ZUxvb3AgZWRpdG9yIGJsb2NrIEVkaXRvciBzY3JpcHRzXG4gKi9cbmFkZEZpbHRlciggJ2VkaXRvci5CbG9ja0VkaXQnLCBHQUxMRVJZX0NPUkVfTkFNRVNQQUNFLCB3aXRoQ29udHJvbHMgKTtcblxuLyoqIHRoZSBlZGl0IGZ1bmN0aW9uICovXG5hZGRGaWx0ZXIoICdlZGl0b3IuQmxvY2tMaXN0QmxvY2snLCBHQUxMRVJZX1ZBUklBVElPTl9OQU1FU1BBQ0UsIHdpdGhFZGl0ICk7XG5cbi8qKlxuICogaW5maW5pdGVMb29wIGZpbmFsIG1hcmt1cFxuICovXG5hZGRGaWx0ZXIoICdibG9ja3MuZ2V0U2F2ZUVsZW1lbnQnLCBHQUxMRVJZX1ZBUklBVElPTl9OQU1FU1BBQ0UsIFNhdmUgKTtcbiIsImltcG9ydCAnLi9zdHlsZS9zdHlsZS5zY3NzJztcblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGlzQWN0aXZlIH0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgQmxhemVDb250cm9scyBmcm9tICcuL0NvbXBvbmVudHMvQ29udHJvbHMnO1xuaW1wb3J0IHsgQmxvY2tBdHRyaWJ1dGVzIH0gZnJvbSAnQHdvcmRwcmVzcy9ibG9ja3MnO1xuXG4vKipcbiAqIFRoZSBzYXZlIGZ1bmN0aW9uIGRlZmluZXMgdGhlIHdheSBpbiB3aGljaCB0aGUgZGlmZmVyZW50IGF0dHJpYnV0ZXMgc2hvdWxkIGJlIGNvbWJpbmVkIGludG8gdGhlIGZpbmFsIG1hcmt1cCwgd2hpY2ggaXMgdGhlbiBzZXJpYWxpemVkIGludG8gcG9zdF9jb250ZW50LlxuICpcbiAqIEBwYXJhbSAgZWxlbWVudFxuICogQHBhcmFtICBibG9ja1R5cGVcbiAqIEBwYXJhbSAgYXR0cmlidXRlc1xuICogQGZ1bmN0aW9uIE9iamVjdCgpIHsgW25hdGl2ZSBjb2RlXSB9XG4gKi9cbmV4cG9ydCBjb25zdCBTYXZlID0gKFxuXHRlbGVtZW50OiBKU1guRWxlbWVudCxcblx0YmxvY2tUeXBlOiBzdHJpbmcsXG5cdGF0dHJpYnV0ZXM6IEJsb2NrQXR0cmlidXRlc1xuKSA9PiB7XG5cdGlmICggISBpc0FjdGl2ZSggYXR0cmlidXRlcyApICkgcmV0dXJuIGVsZW1lbnQ7XG5cblx0Y29uc3Qgc2xpZGVyUHJvcHMgPSBKU09OLnN0cmluZ2lmeSggeyAuLi5hdHRyaWJ1dGVzLmJsYXplY29uZmlnIH0gKSB8fCBudWxsO1xuXG5cdC8vIHJldHVybiB0aGUgZWxlbWVudCB3cmFwcGVkIGluIGEgZGl2XG5cdHJldHVybiAoXG5cdFx0PGRpdiBjbGFzc05hbWU9XCJibGF6ZS1zbGlkZXJcIiBkYXRhLWJsYXplPXsgc2xpZGVyUHJvcHMgfT5cblx0XHRcdDxkaXYgY2xhc3NOYW1lPVwiYmxhemUtY29udGFpbmVyXCI+XG5cdFx0XHRcdDxkaXYgY2xhc3NOYW1lPVwiYmxhemUtdHJhY2stY29udGFpbmVyXCI+eyBlbGVtZW50IH08L2Rpdj5cblx0XHRcdDwvZGl2PlxuXHRcdFx0PEJsYXplQ29udHJvbHMgLz5cblx0XHQ8L2Rpdj5cblx0KTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFNhdmU7XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbl9fd2VicGFja19yZXF1aXJlX18ubSA9IF9fd2VicGFja19tb2R1bGVzX187XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBubyBiYXNlVVJJXG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4vLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbi8vIFtyZXNvbHZlLCByZWplY3QsIFByb21pc2VdID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxudmFyIGluc3RhbGxlZENodW5rcyA9IHtcblx0MzA5OiAwLFxuXHQ2NDE6IDBcbn07XG5cbi8vIG5vIGNodW5rIG9uIGRlbWFuZCBsb2FkaW5nXG5cbi8vIG5vIHByZWZldGNoaW5nXG5cbi8vIG5vIHByZWxvYWRlZFxuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0XG5cbl9fd2VicGFja19yZXF1aXJlX18uTy5qID0gKGNodW5rSWQpID0+IChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPT09IDApO1xuXG4vLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbnZhciB3ZWJwYWNrSnNvbnBDYWxsYmFjayA9IChwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiwgZGF0YSkgPT4ge1xuXHR2YXIgY2h1bmtJZHMgPSBkYXRhWzBdO1xuXHR2YXIgbW9yZU1vZHVsZXMgPSBkYXRhWzFdO1xuXHR2YXIgcnVudGltZSA9IGRhdGFbMl07XG5cdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuXHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcblx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMDtcblx0aWYoY2h1bmtJZHMuc29tZSgoaWQpID0+IChpbnN0YWxsZWRDaHVua3NbaWRdICE9PSAwKSkpIHtcblx0XHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcblx0XHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG5cdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX18ubVttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKHJ1bnRpbWUpIHZhciByZXN1bHQgPSBydW50aW1lKF9fd2VicGFja19yZXF1aXJlX18pO1xuXHR9XG5cdGlmKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKSBwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbihkYXRhKTtcblx0Zm9yKDtpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspIHtcblx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGluc3RhbGxlZENodW5rcywgY2h1bmtJZCkgJiYgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKSB7XG5cdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0oKTtcblx0XHR9XG5cdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gMDtcblx0fVxuXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5PKHJlc3VsdCk7XG59XG5cbnZhciBjaHVua0xvYWRpbmdHbG9iYWwgPSBzZWxmW1wid2VicGFja0NodW5rc2xpZGVyX2Jsb2NrXCJdID0gc2VsZltcIndlYnBhY2tDaHVua3NsaWRlcl9ibG9ja1wiXSB8fCBbXTtcbmNodW5rTG9hZGluZ0dsb2JhbC5mb3JFYWNoKHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgMCkpO1xuY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2ggPSB3ZWJwYWNrSnNvbnBDYWxsYmFjay5iaW5kKG51bGwsIGNodW5rTG9hZGluZ0dsb2JhbC5wdXNoLmJpbmQoY2h1bmtMb2FkaW5nR2xvYmFsKSk7IiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBkZXBlbmRzIG9uIG90aGVyIGxvYWRlZCBjaHVua3MgYW5kIGV4ZWN1dGlvbiBuZWVkIHRvIGJlIGRlbGF5ZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXy5PKHVuZGVmaW5lZCwgWzY0MV0sICgpID0+IChfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1NikpKVxuX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18uTyhfX3dlYnBhY2tfZXhwb3J0c19fKTtcbiJdLCJuYW1lcyI6WyJkZWZlcnJlZCIsIndpbmRvdyIsIlNUQVJUIiwiQXV0b21hdGEiLCJjb25zdHJ1Y3RvciIsInRvdGFsU2xpZGVzIiwiY29uZmlnIiwidGhpcyIsImlzVHJhbnNpdGlvbmluZyIsImNvbnN0cnVjdEF1dG9tYXRhIiwibmV4dCIsInBhZ2VzIiwiaXNTdGF0aWMiLCJzdGF0ZUluZGV4Iiwic2xpZGVzTW92ZWQiLCJuZXdTdGF0ZUluZGV4IiwiaSIsInN0YXRlIiwic3RhdGVzIiwibW92ZVNsaWRlcyIsInByZXYiLCJhdXRvbWF0YSIsInNsaWRlciIsInNsaWRlc1RvU2Nyb2xsIiwic2xpZGVzVG9TaG93IiwicHJvcGVyU2xpZGVzVG9TY3JvbGwiLCJmaXhTbGlkZXJDb25maWciLCJsb29wIiwibGFzdEluZGV4Iiwic3RhcnRJbmRleCIsIl9lbmRJbmRleCIsImxhc3RQYWdlSW5kZXgiLCJsZW5ndGgiLCJwdXNoIiwiZW5kSW5kZXgiLCJjYWxjdWxhdGVQYWdlcyIsInBhZ2VJbmRleCIsIm5leHRQYWdlSW5kZXgiLCJwcmV2UGFnZUluZGV4IiwiY3VycmVudFBhZ2VTdGFydEluZGV4IiwibmV4dFBhZ2VTdGFydEluZGV4IiwicHJldlBhZ2VTdGFydEluZGV4IiwibmV4dERpZmYiLCJwcmV2RGlmZiIsInBhZ2UiLCJjYWxjdWxhdGVTdGF0ZXMiLCJvblNsaWRlRW5kIiwib25TbGlkZUNicyIsImZpcnN0U2xpZGVJbmRleCIsImxhc3RTbGlkZUluZGV4IiwiZm9yRWFjaCIsImNiIiwibm9Mb29wU2Nyb2xsIiwib2Zmc2V0IiwidXBkYXRlVHJhbnNmb3JtIiwidHJhY2siLCJkcmFnZ2VkIiwic3R5bGUiLCJ0cmFuc2Zvcm0iLCJzbGlkZUdhcCIsImVuYWJsZVRyYW5zaXRpb24iLCJ0cmFuc2l0aW9uRHVyYXRpb24iLCJkaXNhYmxlVHJhbnNpdGlvbiIsImlzVG91Y2giLCJoYW5kbGVQb2ludGVyRG93biIsImRvd25FdmVudCIsImlzU2Nyb2xsZWQiLCJzdGFydE1vdXNlQ2xpZW50WCIsInRvdWNoZXMiLCJjbGllbnRYIiwidGFyZ2V0Iiwic2V0UG9pbnRlckNhcHR1cmUiLCJwb2ludGVySWQiLCJ1cGRhdGVFdmVudExpc3RlbmVyIiwiaGFuZGxlUG9pbnRlck1vdmUiLCJtb3ZlRXZlbnQiLCJ4IiwiZHJhZ2dlZEFicyIsIk1hdGgiLCJhYnMiLCJpc0RyYWdnaW5nIiwicHJldmVudERlZmF1bHQiLCJoYW5kbGVQb2ludGVyVXAiLCJldmVudCIsIm1ldGhvZCIsImRlZmF1bHRDb25maWciLCJlbmFibGVBdXRvcGxheSIsInN0b3BBdXRvcGxheU9uSW50ZXJhY3Rpb24iLCJhdXRvcGxheUludGVydmFsIiwiYXV0b3BsYXlEaXJlY3Rpb24iLCJlbmFibGVQYWdpbmF0aW9uIiwidHJhbnNpdGlvblRpbWluZ0Z1bmN0aW9uIiwiZHJhZ2dhYmxlIiwiY3JlYXRlQ29uZmlnIiwiYmxhemVDb25maWciLCJtZWRpYSIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwibWVkaWFDb25maWciLCJrZXkiLCJoYW5kbGVQYWdpbmF0aW9uQnV0dG9uQ2xpY2siLCJpbmRleCIsImRpZmYiLCJpbnZlcnNlRGlmZiIsInNjcm9sbE9wcG9zaXRlIiwidGltZSIsInNldFRpbWVvdXQiLCJCbGF6ZVNsaWRlciIsImJsYXplU2xpZGVyRWwiLCJxdWVyeVNlbGVjdG9yIiwic2xpZGVzIiwiY2hpbGRyZW4iLCJzdXBlciIsImVsIiwiYmxhemVTbGlkZXIiLCJwYXNzZWRDb25maWciLCJjb25zdHJ1Y3QiLCJpZ25vcmVSZXNpemUiLCJ3aWR0aCIsImFkZEV2ZW50TGlzdGVuZXIiLCJpbm5lcldpZHRoIiwibmV3V2lkdGgiLCJyZWZyZXNoIiwiY291bnQiLCJ0cmFuc2l0aW9uIiwicHJldlN0YXRlSW5kZXgiLCJzbGlkZUNvdW50IiwiaGFuZGxlU3RhdGVDaGFuZ2UiLCJyQWYiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJhcHBlbmQiLCJ3cmFwTmV4dCIsInNjcm9sbE5leHQiLCJsZW4iLCJzbGlkZSIsInByZXBlbmQiLCJ3cmFwUHJldiIsInJlc2V0Iiwib25jZSIsInNjcm9sbFByZXYiLCJzdG9wQXV0b3BsYXkiLCJjbGVhckludGVydmFsIiwiYXV0b3BsYXlUaW1lciIsImRlc3Ryb3kiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicGFnaW5hdGlvbkJ1dHRvbnMiLCJidXR0b24iLCJyZW1vdmUiLCJjbGFzc0xpc3QiLCJuZXdDb25maWciLCJvblNsaWRlIiwiU2V0IiwiYWRkIiwiZGVsZXRlIiwiYnV0dG9ucyIsInRyYW5zaXRpb25Qcm9wZXJ0eSIsInNldFByb3BlcnR5IiwiZHJhZ1N1cHBvcnQiLCJwYWdpbmF0aW9uQ29udGFpbmVyIiwidG90YWwiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsImFyaWFMYWJlbCIsIm9uY2xpY2siLCJoYW5kbGVQYWdpbmF0aW9uIiwiZGlyIiwic2V0SW50ZXJ2YWwiLCJoYW5kbGVBdXRvcGxheSIsImhhbmRsZU5hdmlnYXRpb24iLCJHQUxMRVJZX0NPUkVfTkFNRVNQQUNFIiwiR0FMTEVSWV9WQVJJQVRJT05fTkFNRVNQQUNFIiwiR0FMTEVSWV9WQVJJQVRJT05fQ0xBU1NOQU1FIiwiYWxsIiwidXNlQmxhemVTbGlkZXIiLCJzbGlkZXJSZWYiLCJ1c2VSZWYiLCJlbFJlZiIsInVzZUVmZmVjdCIsImN1cnJlbnQiLCJpc0FjdGl2ZSIsImNsYXNzTmFtZSIsIl9leHRlbmRzIiwiT2JqZWN0IiwiYXNzaWduIiwiYmluZCIsImFyZ3VtZW50cyIsInNvdXJjZSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImFwcGx5IiwiY3JlYXRlSGlnaGVyT3JkZXJDb21wb25lbnQiLCJIb2NDb21wb25lbnQiLCJwcm9wcyIsImF0dHJpYnV0ZXMiLCJpc1NlbGVjdGVkIiwic2V0QXR0cmlidXRlcyIsImNvbnNvbGUiLCJsb2ciLCJibGF6ZWNvbmZpZyIsImdldEJsYXplQ29uZmlnIiwicmVmIiwiSlNPTiIsInN0cmluZ2lmeSIsIkluc3BlY3RvckNvbnRyb2xzIiwiUGFuZWxCb2R5IiwidGl0bGUiLCJpbml0aWFsT3BlbiIsIlRvZ2dsZUNvbnRyb2wiLCJsYWJlbCIsIl9fIiwiY2hlY2tlZCIsIm9uQ2hhbmdlIiwidmFsdWUiLCJSYW5nZUNvbnRyb2wiLCJtaW4iLCJtYXgiLCJCbG9ja0xpc3RCbG9jayIsIm5ld1Byb3BzIiwid3JhcHBlclByb3BzIiwicmVnaXN0ZXJCbG9ja1ZhcmlhdGlvbiIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsImlzRGVmYXVsdCIsImljb24iLCJrZXl3b3JkcyIsInNjb3BlIiwiYWRkRmlsdGVyIiwid2l0aENvbnRyb2xzIiwid2l0aEVkaXQiLCJlbGVtZW50IiwiYmxvY2tUeXBlIiwic2xpZGVyUHJvcHMiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIm0iLCJPIiwicmVzdWx0IiwiY2h1bmtJZHMiLCJmbiIsInByaW9yaXR5Iiwibm90RnVsZmlsbGVkIiwiSW5maW5pdHkiLCJmdWxmaWxsZWQiLCJqIiwia2V5cyIsImV2ZXJ5Iiwic3BsaWNlIiwiciIsIm8iLCJvYmoiLCJwcm9wIiwiaW5zdGFsbGVkQ2h1bmtzIiwiY2h1bmtJZCIsIndlYnBhY2tKc29ucENhbGxiYWNrIiwicGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24iLCJkYXRhIiwibW9yZU1vZHVsZXMiLCJydW50aW1lIiwic29tZSIsImlkIiwiY2h1bmtMb2FkaW5nR2xvYmFsIiwic2VsZiIsIl9fd2VicGFja19leHBvcnRzX18iXSwic291cmNlUm9vdCI6IiJ9